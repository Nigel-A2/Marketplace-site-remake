YUI.add("fl-event-move",function(t){var e={_isEndEvent:!1,on:function(t,e,i){-1<this.type.indexOf("end")&&(this._isEndEvent=!0),e._direction=this.type.replace("gesturemove","").replace("end",""),window.navigator.msPointerEnabled?(e._startHandle=t.on("MSPointerDown",this._onStart,this,t,e,i),e._moveHandle=t.on("MSPointerMove",this._onMove,this,t,e,i),e._endHandle=t.on("MSPointerUp",this._onEnd,this,t,e,i)):(e._startHandle=t.on("gesturemovestart",this._onStart,null,this,t,e,i),e._moveHandle=t.on("gesturemove",this._onMove,null,this,t,e,i),e._endHandle=t.on("gesturemoveend",this._onEnd,{standAlone:!0},this,t,e,i))},detach:function(t,e,i){e._startHandle.detach(),e._startHandle=null,e._moveHandle.detach(),e._moveHandle=null,e._endHandle.detach(),e._endHandle=null},_onStart:function(t,e,i,s){i._doMove=null,i._startX=t.pageX,i._startY=t.pageY},_onMove:function(t,e,i,s){this._checkDirection(t,i)?i._doMove=!0:i._doMove=!1,i._doMove&&!this._isEndEvent&&s.fire(t)},_onEnd:function(t,e,i,s){i._doMove&&this._isEndEvent&&(t.startPageX=i._startX,t.startPageY=i._startY,s.fire(t)),i._doMove=null},_checkDirection:function(t,e){var i=Math.abs(e._startX-t.pageX),s=Math.abs(e._startY-t.pageY);return i<s&&e._startY>t.pageY&&"vertical"==e._direction||(i<s&&e._startY<t.pageY&&"vertical"==e._direction||(s<i&&e._startX>t.pageX&&"horizontal"==e._direction||s<i&&e._startX<t.pageX&&"horizontal"==e._direction))}};t.Event.define("gesturemovevertical",e),t.Event.define("gesturemoveverticalend",e),t.Event.define("gesturemovehorizontal",e),t.Event.define("gesturemovehorizontalend",e)},"2.0.0",{requires:["event-move"]}),YUI.add("fl-slideshow",function(b){var t;b.namespace("FL").SlideshowCaption=b.Base.create("fl-slideshow-caption",b.Widget,[b.WidgetChild],{_textToggled:!1,_textToggleLink:null,renderUI:function(){var t=this.get("root"),e=this.get("boundingBox");this._textToggleLink=b.Node.create('<a href="javascript:void(0);"></a>'),this._textToggleLink.addClass("fl-slideshow-caption-toggle"),this._textToggleLink.set("innerHTML",t.get("captionMoreLinkText")),e.appendChild(this._textToggleLink)},bindUI:function(){this.get("root").on("imageLoadComplete",b.bind(this._setText,this)),this._textToggleLink.on("click",b.bind(this._toggleText,this))},_setText:function(){var t=this.get("root"),e=t.imageInfo.caption,i=t.get("captionTextLength"),s=this.get("contentBox");if(!t.imageInfo.caption||""===t.imageInfo.caption)return s.set("innerHTML",""),void this._textToggleLink.setStyle("display","none");-1<i?!this._textToggled&&i<e.length?(e=this._shortenText(e),this._textToggleLink.setStyle("display","inline-block")):this._textToggled&&i<e.length?(e=this._stripTags(e),this._textToggleLink.setStyle("display","inline-block")):(e=this._stripTags(e),this._textToggleLink.setStyle("display","none")):e=this._stripTags(e),s.set("innerHTML",e)},_toggleText:function(){var t=this.get("root"),e=t.imageInfo.caption,i=this.get("contentBox");this._textToggled?(e=this._shortenText(e),this._textToggleLink.set("innerHTML",t.get("captionMoreLinkText")),this._textToggled=!1):(e=this._stripTags(e),this._textToggleLink.set("innerHTML",t.get("captionLessLinkText")),this._textToggled=!0),i.set("innerHTML",e)},_stripTags:function(t,e){var i=this.get("root");return(e||i.get("captionStripTags"))&&((e=document.createElement("div")).innerHTML=t,t=e.textContent||e.innerText),t},_shortenText:function(t){var e=this.get("root");return t=this._stripTags(t,!0).substring(0,e.get("captionTextLength")),b.Lang.trim(t.substring(0,t.lastIndexOf(" ")))+" ..."}},{CSS_PREFIX:"fl-slideshow-caption",ATTRS:{}}),b.namespace("FL").SlideshowFrame=b.Base.create("fl-slideshow-frame",b.Widget,[b.WidgetParent,b.WidgetChild],{_imageInfo:null,_activeImage:null,_nextImage:null,_loadQueue:null,_transition:null,_transitioning:!1,_resizeAfterTransition:!1,_gestures:null,initializer:function(){var t=this.get("imageConfig");this._activeImage=new b.FL.SlideshowImage(t),this._nextImage=new b.FL.SlideshowImage(t)},renderUI:function(){this.add(this._activeImage),this.add(this._nextImage)},bindUI:function(){var t=this._activeImage.get("boundingBox"),e=this._nextImage.get("boundingBox"),i=this.get("transition");("ontouchstart"in window||window.navigator.msPointerEnabled)&&this.get("touchSupport")&&(this._gestures=new b.FL.SlideshowGestures({direction:"slideVertical"==i?"vertical":"horizontal",activeItem:t,nextItem:e}),this._gestures.on("moveStart",this._gesturesMoveStart,this),this._gestures.on("endComplete",this._gesturesEndComplete,this))},syncUI:function(){var t=this._activeImage.get("boundingBox"),e=this._nextImage.get("boundingBox"),i=this.get("contentBox");t.setStyle("position","absolute"),t.setStyle("top","0px"),t.setStyle("left","-9999px"),e.setStyle("position","absolute"),e.setStyle("top","0px"),e.setStyle("left","-9999px"),i.setStyle("position","relative"),i.setStyle("overflow","hidden")},load:function(t){var e=this._activeImage._imageInfo;this._transitioning?this._loadQueue=t:e&&e.largeURL==t.largeURL||(this._imageInfo=t,this._transitionInit(t))},preload:function(t,e,i){this._imageInfo=t,this._nextImage.preload(t,e,i)},unload:function(){this._imageInfo=null,this._loadQueue=null,this._transitioning=!1,this._transition=null,this._activeImage.detachAll(),this._activeImage.unload(),this._activeImage.get("boundingBox").setStyle("left","-9999px"),this._nextImage.detachAll(),this._nextImage.unload(),this._nextImage.get("boundingBox").setStyle("left","-9999px")},resize:function(t,e){var i;t&&e&&(i=this.get("boundingBox"),e=e-(i=[parseInt(i.getComputedStyle("paddingTop"),10),parseInt(i.getComputedStyle("paddingRight"),10),parseInt(i.getComputedStyle("paddingBottom"),10),parseInt(i.getComputedStyle("paddingLeft"),10)])[0]-i[2],this.set("width",t=t-i[1]-i[3]),this.set("height",e),this._transitioning?this._resizeAfterTransition=!0:(this._activeImage.resize(t,e),this._nextImage.resize(t,e)))},_getTransition:function(){var t=this.get("root"),e=t.albumInfo.images.length-1,i="next",s=t.get("transition");return null===t.lastImageIndex?i="":t.imageIndex==e&&0===t.lastImageIndex?i="prev":0===t.imageIndex&&t.lastImageIndex==e?i="next":t.lastImageIndex>t.imageIndex?i="prev":t.lastImageIndex<t.imageIndex&&(i="next"),"next"==i?s=(s=s.replace("slideHorizontal","slideLeft")).replace("slideVertical","slideUp"):"prev"==i&&(s=(s=s.replace("slideHorizontal","slideRight")).replace("slideVertical","slideDown")),s},_transitionInit:function(t){this._transitioning=!0,this._gestures&&this._gestures.disable(),this.fire("transitionInit"),t?(this._nextImage.once("loadComplete",this._transitionStart,this),this._nextImage.load(t)):this._transitionStart()},_transitionStart:function(){var t=this.get("root");this.fire("transitionStart"),this._transition=new b.FL.SlideshowTransition({itemIn:this._nextImage._imageInfo?this._nextImage.get("boundingBox"):null,itemOut:this._activeImage._imageInfo?this._activeImage.get("boundingBox"):null,type:this._getTransition(),duration:t.get("transitionDuration"),easing:t.get("transitionEasing"),kenBurnsDuration:t.get("speed")/1e3,kenBurnsZoom:t.get("kenBurnsZoom")}),this._nextImage._imageInfo&&this._nextImage.get("boundingBox").setStyle("left","0px"),this._transition.once("complete",this._transitionComplete,this),this._transition.run()},_transitionComplete:function(){var t=this.get("root");this._swapImageRefs(),this.fire("transitionComplete"),this._transition=null,this._transitioning=!1,this._gestures&&(t&&t.albumInfo.images.length<=1?this._gestures.disable():this._gestures.enable()),this._loadQueue?(this.load(this._loadQueue),this._loadQueue=null):this._resizeAfterTransition&&(this._resizeAfterTransition=!1,this._activeImage.resize(this.get("width"),this.get("height")),this._nextImage.resize(this.get("width"),this.get("height")))},_gesturesMoveStart:function(t){var e=0,i=this.get("root");e=(e=(e="next"==t.direction?i.imageIndex+1:i.imageIndex-1)<0?i.albumInfo.images.length-1:e)>=i.albumInfo.images.length?0:e,i.pause(),i._hideLoadingImage(),i._showLoadingImageWithDelay(),b.FL.SlideshowImageLoader.removeGroup(this._nextImage.get("loadGroup")),this._nextImage.once("loadComplete",i._hideLoadingImage,i),this._nextImage.load(i.albumInfo.images[e])},_gesturesEndComplete:function(){var t,e=this.get("root");this._nextImage._imageInfo&&(t=this._nextImage._imageInfo.index,this._swapImageRefs(),this._imageInfo=e.albumInfo.images[t],e.loadImage(t))},_swapImageRefs:function(){var t=this._activeImage;this._activeImage=this._nextImage,this._nextImage=t,this._nextImage._imageInfo&&(this._nextImage.unload(),this._nextImage.get("boundingBox").setStyle("left","-9999px")),this._gestures&&(this._gestures.set("activeItem",this._activeImage.get("boundingBox")),this._gestures.set("nextItem",this._nextImage.get("boundingBox")))}},{CSS_PREFIX:"fl-slideshow-frame",ATTRS:{imageConfig:{value:null},touchSupport:{value:!1}}}),b.namespace("FL").SlideshowFullscreen=b.Base.create("fl-slideshow-fullscreen",b.Plugin.Base,[],{active:!1,_closeMessage:null,_closeMessageTimer:null,_initialStyles:{position:"static",top:"0px",left:"0px"},initializer:function(){var t=this.get("host").get("boundingBox"),e=this;t.addClass("fl-fullscreen-enabled"),b.FL.SlideshowFullscreen.OS_SUPPORT?(document.addEventListener("fullscreenchange",function(){e._osChange()},!1),document.addEventListener("mozfullscreenchange",function(){e._osChange()},!1),document.addEventListener("webkitfullscreenchange",function(){e._osChange()},!1)):this._renderCloseMessage()},toggle:function(){this.active?this.exit():this.enter()},enter:function(){b.FL.SlideshowFullscreen.OS_SUPPORT?this._osEnter():this._browserEnter()},exit:function(){b.FL.SlideshowFullscreen.OS_SUPPORT?this._osExit():this._browserExit()},_osEnter:function(){var t=this.get("host").get("boundingBox")._node;t.webkitRequestFullScreen?t.webkitRequestFullScreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.requestFullScreen&&t.requestFullScreen()},_osExit:function(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen()},_osChange:function(){var t=this.get("host");t.frame&&t.frame._transitioning&&t.frame._transitionComplete(),this.active?this._exit():this._enter()},_browserEnter:function(){var t=this.get("host").get("boundingBox");this._initialStyles={position:t.getStyle("position"),top:t.getStyle("top"),left:t.getStyle("left"),zIndex:t.getStyle("zIndex")},t.setStyles({position:"fixed",top:"0px",left:"0px",zIndex:1e4}),b.Node.one("body").on("fl-fullscreen|keydown",b.bind(this._onKey,this)),this._showCloseMessage(),this._enter()},_browserExit:function(){this.get("host").get("boundingBox").setStyles({position:this._initialStyles.position,top:this._initialStyles.top,left:this._initialStyles.left,zIndex:this._initialStyles.zIndex}),b.Node.one("body").detach("fl-fullscreen|keydown"),this._hideCloseMessage(),this._exit()},_enter:function(){var t=this.get("host");t.get("boundingBox").addClass("fl-fullscreen-active"),this.active=!0,t.resize()},_exit:function(){var t=this.get("host");t.get("boundingBox").removeClass("fl-fullscreen-active"),this.active=!1,t.resize()},_onKey:function(t){if(27==t.keyCode)return this.exit(),!1},_renderCloseMessage:function(){this._closeMessage=b.Node.create('<div class="fl-fullscreen-close-message"></div>'),this._closeMessage.set("innerHTML",'<span>Press the "esc" button to exit fullscreen mode.</span>'),this._closeMessage.setStyle("display","none"),this.get("host").get("boundingBox").insert(this._closeMessage)},_showCloseMessage:function(){this._closeMessageTimer&&(this._closeMessageTimer.cancel(),this._closeMessageTimer=null),this._closeMessage.show(!0),this._closeMessageTimer=b.later(4e3,this,this._hideCloseMessage)},_hideCloseMessage:function(){this._closeMessageTimer&&(this._closeMessageTimer.cancel(),this._closeMessageTimer=null),this._closeMessage.hide(!0)}},{NS:"fullscreen",OS_SUPPORT:(t=document.documentElement).webkitRequestFullScreen||t.mozRequestFullScreen||t.requestFullScreen}),b.namespace("FL").SlideshowGestures=b.Base.create("fl-slideshow-gestures",b.Base,[],{_startX:null,_startY:null,_touchMoving:!1,_moving:!1,_movingDirection:null,_transitioning:!1,initializer:function(){this.enable()},enable:function(){var t=this.get("id"),e=this.get("direction"),i=this.get("activeItem"),s=this.get("nextItem");i.on(t+"|gesturemovestart",b.bind(this._onStart,this)),s.on(t+"|gesturemovestart",b.bind(this._onStart,this)),s.on(t+"|transitionend",b.bind(this._onEndComplete,this)),s.on(t+"|oTransitionEnd",b.bind(this._onEndComplete,this)),s.on(t+"|webkitTransitionEnd",b.bind(this._onEndComplete,this)),"horizontal"==e?(i.on(t+"|gesturemovehorizontal",b.bind(this._onMoveHorizontal,this)),i.on(t+"|gesturemovehorizontalend",b.bind(this._onEndHorizontal,this)),s.on(t+"|gesturemovehorizontal",b.bind(this._onMoveHorizontal,this)),s.on(t+"|gesturemovehorizontalend",b.bind(this._onEndHorizontal,this))):(i.on(t+"|gesturemovevertical",b.bind(this._onMoveVertical,this)),i.on(t+"|gesturemoveverticalend",b.bind(this._onEndVertical,this)),s.on(t+"|gesturemovevertical",b.bind(this._onMoveVertical,this)),s.on(t+"|gesturemoveverticalend",b.bind(this._onEndVertical,this)))},disable:function(){var t=this.get("id"),e=this.get("activeItem"),i=this.get("nextItem");e.detach(t+"|*"),i.detach(t+"|*")},_onStart:function(t){var e=this.get("direction");this._transitioning&&this._onEndComplete(),"horizontal"==e?this._startX=t.pageX:this._startY=t.pageY,this.fire("start")},_onMoveHorizontal:function(t){var e=this._startX-t.pageX,i=this.get("activeItem"),s=this.get("nextItem"),n=parseInt(i.getComputedStyle("width"),10),a=e<0?Math.abs(e):-e,o=e<0?"prev":"next";t.preventDefault(),this._moving&&this._movingDirection==o||(i.setStyle("left",0),s.setStyles({opacity:1,left:e<0?-n:n}),this._moving=!0,this._movingDirection=o,this.fire("moveStart",{direction:o})),i.setStyle("-webkit-transform","translate("+a+"px, 0px) translateZ(0px)"),i.setStyle("-ms-transform","translate("+a+"px, 0px) translateZ(0px)"),s.setStyle("-webkit-transform","translate("+a+"px, 0px) translateZ(0px)"),s.setStyle("-ms-transform","translate("+a+"px, 0px) translateZ(0px)"),this.fire("move")},_onMoveVertical:function(t){var e=this._startY-t.pageY,i=this.get("activeItem"),s=this.get("nextItem"),n=parseInt(i.getComputedStyle("height"),10),a=e<0?Math.abs(e):-e,o=e<0?"prev":"next";t.preventDefault(),this._moving&&this._movingDirection==o||(i.setStyle("top",0),s.setStyles({opacity:1,left:"auto",top:e<0?-n:n}),this._moving=!0,this._movingDirection=o,this.fire("moveStart",{direction:o})),i.setStyle("-webkit-transform","translate(0px, "+a+"px) translateZ(0px)"),i.setStyle("-ms-transform","translate(0px, "+a+"px) translateZ(0px)"),s.setStyle("-webkit-transform","translate(0px, "+a+"px) translateZ(0px)"),s.setStyle("-ms-transform","translate(0px, "+a+"px) translateZ(0px)"),this.fire("move")},_onEndHorizontal:function(t){var e,i,s;this._moving&&(t=this._startX-t.pageX,s=this.get("activeItem"),e=this.get("nextItem"),i=parseInt(e.getComputedStyle("width"),10),s.transition({transform:"translate("+(s=t<0?i:-i)+"px, 0px)"}),e.transition({transform:"translate("+s+"px, 0px)"}),this._transitioning=!0,this.fire("end"))},_onEndVertical:function(t){var e,i,s;this._moving&&(t=this._startY-t.pageY,s=this.get("activeItem"),e=this.get("nextItem"),i=parseInt(e.getComputedStyle("height"),10),s.transition({transform:"translate(0px, "+(s=t<0?i:-i)+"px)"}),e.transition({transform:"translate(0px, "+s+"px)"}),this._transitioning=!0,this.fire("end"))},_onEndComplete:function(){var t=this.get("direction"),e=this.get("activeItem"),i=this.get("nextItem");e.setStyles({opacity:0,"-webkit-transform":"","-webkit-transition":"","-ms-transform":"","-ms-transition":""}),i.setStyles({"-webkit-transform":"","-webkit-transition":"","-ms-transform":"","-ms-transition":""}),"horizontal"==t?(e.setStyle("left","-9999px"),i.setStyle("left","0px")):(e.setStyle("top","-9999px"),i.setStyle("top","0px")),this.set("activeItem",i),this.set("nextItem",e),this._moving=!1,this._movingDirection=null,this._transitioning=!1,this.fire("endComplete")}},{ATTRS:{direction:{value:"horizontal"},activeItem:{value:null},nextItem:{value:null}}}),b.namespace("FL").SlideshowImageLoader={_loading:!1,_currentImage:null,_currentImageData:null,_queue:[],add:function(t,e,i,s){t={group:t,src:e,callback:i};s?this._queue.unshift(t):this._queue.push(t),this._loading||this._load()},removeGroup:function(t){for(var e=this._queue.length-1;-1<e;e--)this._queue[e].group==t&&this._queue.splice(e,1);this._currentImageData&&this._currentImageData.group==t&&(this._currentImage.detachAll(),this._currentImage=null,this._currentImageData=null,0<this._queue.length?this._load():this._loading=!1)},_load:function(){this._loading=!0,this._currentImageData=this._queue.shift(),this._currentImage=b.Node.create("<img />"),this._currentImage.on("error",b.bind(this._loadComplete,this)),this._currentImage.on("load",b.bind(this._loadComplete,this)),this._currentImage.set("src",this._currentImageData.src)},_loadComplete:function(){this._currentImageData.callback&&this._currentImageData.callback(this._currentImage),0<this._queue.length?this._load():(this._loading=!1,this._currentImage=null,this._currentImageData=null)}},b.namespace("FL").SlideshowImage=b.Base.create("fl-slideshow-image",b.Widget,[b.WidgetChild],{_imageInfo:null,_image:null,_loading:!1,_loadingURL:null,_videoButton:null,_videoBox:null,_video:null,CONTENT_TEMPLATE:null,syncUI:function(){var t=this.get("boundingBox");this.get("crop")&&(t.setStyle("overflow","hidden"),t.addClass("fl-slideshow-image-cropped"))},load:function(t){this._imageInfo=t,this._loading=!0,this._load()},preload:function(t,e,i){var s=this._isVideo(),n=this.get("loadVideos"),a=this.get("showVideoButton");this.unload(),this.set("width",e),this.set("height",i),this._imageInfo=t,s&&n&&!(s&&n&&a)||b.FL.SlideshowImageLoader.add(this.get("loadGroup"),this._getImageURL(),b.bind(this._imagePreloaded,this),this.get("loadPriority"))},_imagePreloaded:function(t){this._image=t},unload:function(){this._image&&(this._image.remove(),this._image.detachAll(),this._image.set("src",""),this._image=null),this._video&&(this._video.remove(),this._video=null),this._videoButton&&(this._videoButton.remove(),this._videoButton=null),this._videoBox&&this._removeVideoBox(),this._imageInfo=null,this._loading=!1,this._loadingURL=null},resize:function(t,e){var i=2*parseInt(this.get("boundingBox").getComputedStyle("borderTopWidth"),10),s=this.get("boundingBox");this.set("width",t-i),this.set("height",e-i),s.setStyle("width",t-i+"px"),s.setStyle("height",e-i+"px"),this._videoButton&&this._positionVideoButton(),this._videoBox&&this._loadVideo(),this._loading||(this._imageInfo&&this._load(),this._image&&this._positionImage())},_load:function(){var t=this.get("loadVideos"),e=this.get("showVideoButton");!this._isVideo()||!t||e||"ontouchstart"in window?this._loadImage():this._loadVideo()},_loadImage:function(){var t=this._getImageURL(),e=this.get("loadVideos");t!=this._loadingURL&&(this._loadingURL=t,b.FL.SlideshowImageLoader.add(this.get("loadGroup"),this._loadingURL,b.bind(this._loadImageComplete,this),this.get("loadPriority")),this._loading&&(this._isVideo()&&e&&this._insertVideoButton(),this.fire("loadStart")))},_loadImageComplete:function(t){var e=this.get("boundingBox"),i=this.get("showVideoButton"),s=this.get("root").get("bgslideshow");this._image=t,this._image.setStyle("visibility","hidden"),this._image.addClass("fl-slideshow-image-img"),s?(this._image.set("aria-hidden","true"),this._image.set("alt","")):this._image.set("alt",this._imageInfo.alt),this._image.detachAll(),this._video&&!i&&(this._video.remove(),this._video=null),e.all("img").remove(),e.append(this._image),this._setupImage(),this._resizeImage(),this._positionImage(),this._image.setStyle("visibility","visible"),this._loadingURL=null,this._loading&&(this._loading=!1,this.fire("loadComplete"))},_setupImage:function(){var t=this.get("boundingBox");void 0!==this._image._node.style.msInterpolationMode&&(this._image._node.style.msInterpolationMode="bicubic"),this.get("protect")&&(t.delegate("contextmenu",this._protectImage,"img"),t.delegate("mousedown",this._protectImage,"img"))},_protectImage:function(t){return t.preventDefault(),!1},_resizeImage:function(){var t=2*parseInt(this._image.getComputedStyle("borderTopWidth"),10),e=this._image.get("width"),i=this._image.get("height"),s=parseInt(this.get("boundingBox").getComputedStyle("width"),10),n=parseInt(this.get("boundingBox").getComputedStyle("height"),10),a=0,o=0,l=this.get("cropHorizontalsOnly"),h=e<i,r=!1;this._imageInfo&&this.get("checkFilenamesForNoCrop")&&(r=-1<this._imageInfo.filename.indexOf("nocrop")),!this.get("crop")||l&&h||r?o=(l=e/s)<(h=i/n)?(a=Math.round(e*(1/h)),Math.round(i*(1/h))):(a=Math.round(e*(1/l)),Math.round(i*(1/l))):(a=s,(o=Math.round(i*s/e))<n&&(o=n,a=Math.round(e*n/i))),this.get("crop")||this.get("upsize")||!(e<a||i<o)||(a=e,o=i),o-=t,this._image.setStyle("width",(a-=t)+"px"),this._image.setStyle("height",o+"px"),!this.get("crop")&&this.get("constrainWidth")&&this.set("width",a+"px"),!this.get("crop")&&this.get("constrainHeight")&&this.set("height",o+"px")},_positionImage:function(){var t=this.get("position").split(" "),e=""===t[0]?"center":t[0],t=""===t[1]?"center":t[1],i=0,s=0,n=parseInt(this.get("boundingBox").getComputedStyle("width"),10),a=parseInt(this.get("boundingBox").getComputedStyle("height"),10),o=2*parseInt(this._image.getComputedStyle("borderTopWidth"),10),l=parseInt(this._image.getComputedStyle("width"),10)+o,o=parseInt(this._image.getComputedStyle("height"),10)+o;isNaN(l)&&isNaN(o)||("left"==e&&(i=0),"center"==e&&(i=(n-l)/2),"top"==t&&(s=0),"center"==t&&(s=(a-o)/2),this._image.setStyles({left:i="right"==e?n-l:i,top:s="bottom"==t?a-o:s}))},_getImageURL:function(){var t=0,e=0,i=this.get("width"),s=this.get("height"),n=this.get("useThumbSizes"),a=this._imageInfo,t=n&&i<=100?0:n&&i<=150?1:i<=400?2:400<=i&&i<=600?3:600<=i&&i<=800?4:800<=i&&i<=1024?5:1024<=i&&i<=1280?6:7,e=n&&s<=100?0:n&&s<=150?1:s<=300?2:300<=s&&s<=450?3:450<=s&&s<=600?4:600<=s&&s<=768?5:768<=s&&s<=960?6:7;return[a.tinyURL||a.thumbURL||a.largeURL,a.thumbURL||a.largeURL,a.smallURL||a.largeURL,a.mediumURL||a.largeURL||a.smallURL,a.largeURL||a.mediumURL||a.smallURL,a.xlargeURL||a.largeURL||a.mediumURL||a.smallURL,a.x2largeURL||a.largeURL||a.mediumURL||a.smallURL,a.x3largeURL||a.x2largeURL||a.largeURL||a.mediumURL||a.smallURL][Math.max(t,e)]},_isVideo:function(){return!!this._imageInfo&&("mp4"==this._imageInfo.format&&"smugmug"==this._imageInfo.sourceType||""!==this._imageInfo.iframe)},_loadVideo:function(){var t=this.get("boundingBox"),e=!!this.get("showVideoButton");this._video&&(this._video.remove(),this._video=null),"mp4"==this._imageInfo.format&&"smugmug"==this._imageInfo.sourceType?this._video=this._getSmugMugVideoEmbed(this._imageInfo,e):""!==this._imageInfo.iframe&&(this._video=this._getIframeVideoEmbed(this._imageInfo,e)),this._videoBox?this._videoBox.one(".fl-slideshow-video-wrap").insert(this._video):(t.all("img").remove(),t.append(this._video)),this._loading&&(this._loading=!1,this.fire("loadComplete"))},_insertVideoButton:function(){var t=this.get("boundingBox"),e="ontouchstart"in window?"touchstart":"click";this._videoButton=b.Node.create('<a class="fl-slideshow-video-button" href="javascript:void(0);"></a>'),this._videoButton.on(e,b.bind(this._showVideoBox,this)),t.insert(this._videoButton),this._positionVideoButton()},_positionVideoButton:function(){var t=this.get("width"),e=this.get("height"),i=parseInt(this._videoButton.getStyle("width"),10),s=parseInt(this._videoButton.getStyle("height"),10);this._videoButton.setStyles({left:(t-i)/2,top:(e-s)/2})},_showVideoBox:function(){var t=this.get("root"),e=b.Node.create('<div class="fl-slideshow-video-wrap"></div>'),i=b.Node.create('<a class="fl-slideshow-video-close" href="javascript:void(0);"></a>'),s="ontouchstart"in window?"touchstart":"click";this._videoBox=b.Node.create('<div class="fl-slideshow-video"></div>'),this._videoBox.setStyle("padding",t.get("boundingBox").getStyle("padding")),this._videoBox.insert(e),this._videoBox.insert(i),this._videoBox.on(s,b.bind(this._removeVideoBox,this)),i.on(s,b.bind(this._removeVideoBox,this)),void 0!==YUI.Env.mods["sm-fonticon"]&&i.addClass("sm-fonticon sm-fonticon-XCrossEncircled sm-button-skin-default sm-button-nochrome"),b.one("body").insert(this._videoBox),this._loadVideo(),b.one("body").on("fl-slideshow-image|keydown",this._onKey,this)},_getSmugMugVideoEmbed:function(t,e){var i=document.createElement("video"),s="",n="",n=null!==b.UA.mobile&&i.canPlayType&&i.canPlayType("video/mp4")?(i=this.get("width"),i="https://www.smugmug.com/photos/"+t.id+"_"+t.key+"-"+i+".mp4",n+='<video width="100%" height="100%" poster="'+this._getImageURL()+'" controls preload="none"',e&&(n+=" autoplay"),(n+=">")+'<source src="'+i+'" type="video/mp4" /></video>'):(s="imageId="+t.id,(n=(n+='<object type="application/x-shockwave-flash" width="100%" height="100%" data="https://cdn.smugmug.com/img/ria/SmugPlayer/2012102601.swf"><param name="movie" value="https://cdn.smugmug.com/img/ria/SmugPlayer/2012102601.swf"><param name="allowFullScreen" value="true">')+'<param name="wmode" value="transparent"><param name="flashVars" value="'+(s=(s=(s=(s+="&amp;imageKey="+t.key)+("&amp;albumId="+t.albumId))+("&amp;albumKey="+t.albumKey))+"&amp;apiURL=https://api.smugmug.com/&amp;hostLevel=live&amp;isPro=true"+(e?"&amp;autoPlay=true":"&amp;autoPlay=false"))+'">')+'<embed src="https://cdn.smugmug.com/img/ria/SmugPlayer/2012102601.swf" flashvars="'+s+'" width="100%" height="100%" type="application/x-shockwave-flash" allowfullscreen="true" wmode="transparent"></object>');return b.Node.create(n)},_getIframeVideoEmbed:function(t,e){var i='<iframe width="100%" height="100%" allowfullscreen ',t=t.iframe;return e&&(t+=-1<t.indexOf("?")?"&autoplay=1":"?autoplay=1"),b.Node.create(i+='src="'+t+'"></iframe>')},_removeVideoBox:function(t){void 0!==t&&t.target&&t.target.get("className").indexOf("fl-slideshow-video")<0||(null!==this._videoBox&&(this._videoBox.remove(),this._videoBox=null,this._video=null),b.one("body").detach("fl-slideshow-image|keydown",this._onKey))},_onKey:function(t){if(27==t.keyCode)return this._removeVideoBox(),!1}},{CSS_PREFIX:"fl-slideshow-image",ATTRS:{loadGroup:{value:"none"},loadPriority:{value:!1},crop:{value:!1},checkFilenamesForNoCrop:{value:!0},cropHorizontalsOnly:{value:!1},position:{value:"center center"},protect:{value:!0},upsize:{value:!0},useThumbSizes:{value:!1},constrainWidth:{value:!1},constrainHeight:{value:!1},loadVideos:{value:!0},showVideoButton:{value:!0}}}),b.namespace("FL").SlideshowMouseNav=b.Base.create("fl-slideshow-mouse-nav",b.Plugin.Base,[],{initializer:function(){var t=this.get("trigger");t.on("click",this._triggerClick,this),t.on("mousemove",this._showArrow,this),t.on("mouseleave",this._hideArrow,this)},_triggerClick:function(t){var e=this.get("host"),i=this.get("trigger"),s=parseInt(i.getStyle("width"),10),i=i.get("region");s/2<=t.pageX-i.left+5?e.nextImage():e.prevImage()},_showArrow:function(t){var e=this.get("host"),i=this.get("trigger"),s=parseInt(i.getStyle("width"),10),n=i.get("region"),t=t.pageX-n.left+5;null!==e.albumInfo&&1<e.albumInfo.images.length&&(s/2<=t?(i.removeClass("fl-slideshow-mouse-nav-prev"),i.addClass("fl-slideshow-mouse-nav-next")):(i.removeClass("fl-slideshow-mouse-nav-next"),i.addClass("fl-slideshow-mouse-nav-prev")))},_hideArrow:function(){var t=this.get("trigger");t.removeClass("fl-slideshow-mouse-nav-next"),t.removeClass("fl-slideshow-mouse-nav-prev")}},{NS:"mouseNav",ATTRS:{trigger:{value:null}}}),b.namespace("FL").SlideshowKenBurns=b.Base.create("fl-slideshow-ken-burns",b.Base,[],{run:function(){var t,e=null;b.FL.Utils.cssSupport("transform")&&(e=this.get("image").one("img"),t=this._getTransform(),e.setStyles({"-webkit-transform-origin":t.origin,"-moz-transform-origin":t.origin,"-ms-transform-origin":t.origin,"transform-origin":t.origin,transform:t.start}),e.transition({easing:"ease-out",duration:this.get("duration"),transform:t.end}))},_getTransform:function(){var t=this.get("zoom"),e=this.get("image"),i=null,s=Math.floor(Math.random()*b.FL.SlideshowKenBurns.ZOOM_DIRECTIONS.length),n=b.FL.SlideshowKenBurns.ZOOM_DIRECTIONS[s];return s=Math.floor(Math.random()*b.FL.SlideshowKenBurns.TRANSFORMS.length),i=b.FL.SlideshowKenBurns.TRANSFORMS[s],e.hasClass("fl-slideshow-image-cropped")||"in"!=n?"out"==n?(i.start="scale("+t+") "+i.translate,i.end="scale(1) translate(0, 0)"):(i.start="scale(1) translate(0, 0)",i.end="scale("+t+") "+i.translate):(s=Math.floor(2*Math.random()),i.start=0===s?"scale(1) translate(100px, 0)":"scale(1) translate(-100px, 0)",i.end="scale("+t+") translate(0, 0)",i.origin="center center"),i}},{ATTRS:{image:{value:null},zoom:{value:1.2},duration:{value:2}},ZOOM_DIRECTIONS:["in","out"],TRANSFORMS:[{origin:"left top",translate:"translate(-30px, -15px)"},{origin:"left center",translate:"translate(-30px, 0)"},{origin:"left bottom",translate:"translate(-30px, 15px)"},{origin:"right top",translate:"translate(30px, -15px)"},{origin:"right center",translate:"translate(30px, 0)"},{origin:"right bottom",translate:"translate(30px, 15px)"}]}),b.namespace("FL").SlideshowNav=b.Base.create("fl-slideshow-nav",b.Widget,[b.WidgetChild],{_buttons:null,_buttonsContainer:null,_buttonsLeftContainer:null,_buttonsRightContainer:null,_fontIcons:{buy:"Cart",caption:"InfoEncircled",close:"XCrossEncircled",fullscreen:"ScreenExpand",next:"ArrowRight",nextPage:"ArrowRight",pause:"PlayerPause",play:"PlayerPlay",prev:"ArrowLeft",prevPage:"ArrowLeft",social:"Heart",thumbs:"ViewThumbGrid"},CONTENT_TEMPLATE:null,renderUI:function(){this._renderContainers(),this._renderButtons(),this._renderFontIcons()},bindUI:function(){var t=this.get("root"),e=this.get("id");this._buttons.prev&&this._buttons.prev.on("click",t.prevImage,t),this._buttons.next&&this._buttons.next.on("click",t.nextImage,t),this._buttons.play&&(this._buttons.play.on("click",this._playClicked,this),t.on(e+"|played",this._showPauseButton,this),t.on(e+"|paused",this._showPlayButton,this),t._playing?this._showPauseButton():this._showPlayButton()),this._buttons.buy&&(t.on(e+"|albumLoadComplete",this._updateBuy,this),null!==t.albumInfo&&this._updateBuy()),this._buttons.count&&t.on(e+"|imageLoadComplete",this._updateCount,this),this._buttons.thumbs&&this._buttons.thumbs.on("click",t._toggleThumbs,t),this._buttons.caption&&(t.on(e+"|imageLoadComplete",this._updateCaption,this),this._updateCaption()),this._buttons.social&&this._buttons.social.on("click",t._toggleSocial,t),this._buttons.fullscreen&&t.fullscreen&&this._buttons.fullscreen.on("click",t.fullscreen.toggle,t.fullscreen),this._buttons.close&&this._buttons.close.on("click",t.hide,t)},destructor:function(){var t=this.get("root"),e=this.get("id");t.detach(e+"|*")},_renderContainers:function(){var t=this.get("contentBox"),e=this.get("buttonsLeft"),i=this.get("buttonsRight");this._buttonsContainer=b.Node.create("<div></div>"),this._buttonsContainer.addClass("fl-slideshow-nav-buttons"),t.appendChild(this._buttonsContainer),0<e.length&&(this._buttonsLeftContainer=b.Node.create("<div></div>"),this._buttonsLeftContainer.addClass("fl-slideshow-nav-buttons-left"),t.appendChild(this._buttonsLeftContainer)),0<i.length&&(this._buttonsRightContainer=b.Node.create("<div></div>"),this._buttonsRightContainer.addClass("fl-slideshow-nav-buttons-right"),t.appendChild(this._buttonsRightContainer))},_renderButtons:function(){var t="",e=0,i=0,s=[{names:this.get("buttons"),container:this._buttonsContainer},{names:this.get("buttonsLeft"),container:this._buttonsLeftContainer},{names:this.get("buttonsRight"),container:this._buttonsRightContainer}];for(this._buttons={};e<s.length;e++)for(i=0;i<s[e].names.length;i++)-1<(t=s[e].names[i]).indexOf("count")?(this._buttons[t]=b.Node.create("<span></span>"),this._updateCount()):this._buttons[t]=b.Node.create('<a href="javascript:void(0);"></a>'),-1<t.indexOf("buy")&&this._buttons[t].setStyle("display","none"),this._buttons[t].set("name",t),this._buttons[t].set("aria-label",t),this._buttons[t].addClass("fl-slideshow-nav-"+t),s[e].container.appendChild(this._buttons[t])},_renderFontIcons:function(){var t=null;if(this.get("useFontIcons")&&void 0!==YUI.Env.mods["sm-fonticon"])for(t in this._buttons)void 0!==this._buttons[t]&&void 0!==this._fontIcons[t]?(this._buttons[t].addClass("sm-fonticon-"+this._fontIcons[t]),this._buttons[t].addClass("sm-fonticon sm-button-skin-default sm-button-nochrome")):-1<t.indexOf("count")&&this._buttons[t].addClass("fonticons-enabled")},_updateCount:function(){var t=b.FL.SlideshowNav.COUNT_TEXT,e=1,i=1;this.get("root").albumInfo&&(e=this.get("root").imageInfo.index+1,i=this.get("root").albumInfo.images.length),t=t.replace("{current}",e).replace("{total}",i),this._buttons.count.set("innerHTML",t)},_updateCaption:function(){var t=this.get("root"),e=t.imageInfo;e&&""===e.caption?(t.caption.slideshowOverlay.enable(),t.caption.slideshowOverlay.hide(),this._buttons.caption.detach("click"),this._buttons.caption.addClass("fl-slideshow-nav-caption-disabled")):(this._buttons.caption.on("click",t._toggleCaption,t),this._buttons.caption.removeClass("fl-slideshow-nav-caption-disabled"))},_updateBuy:function(){var t=null,e=this.get("root"),i=e.get("source")[e.albumIndex],s=e.albumIndex,s=e.get("source")[s];i&&"smugmug"==i.type&&(void 0!==e.albumInfo.printable?this._updateBuyComplete():((t=new b.FL.SmugMugAPI).addParam("method","smugmug.albums.getInfo"),t.addParam("AlbumID",s.id),t.addParam("AlbumKey",s.key),t.on("complete",this._updateBuyComplete,this),t.request()))},_updateBuyComplete:function(t){var e=this.get("root"),t=void 0===t?e.albumInfo.printable:t.Album.Printable,i=e.albumInfo.link;t?(e.albumInfo.printable=!0,this._buttons.buy.set("href","https://secure.smugmug.com/cart/batchadd/?url="+encodeURIComponent(i)),this._buttons.buy.setStyle("display","inline-block")):(e.albumInfo.printable=!1,this._buttons.buy.setStyle("display","none")),this.fire("resize")},_playClicked:function(){var t=this.get("root");t._playing?t.pause():t.play()},_showPlayButton:function(){this._buttons.play.removeClass("fl-slideshow-nav-pause"),this._buttons.play.addClass("fl-slideshow-nav-play"),this.get("useFontIcons")&&void 0!==YUI.Env.mods["sm-fonticon"]&&(this._buttons.play.removeClass("sm-fonticon-PlayerPause"),this._buttons.play.addClass("sm-fonticon-PlayerPlay"))},_showPauseButton:function(){this._buttons.play.removeClass("fl-slideshow-nav-play"),this._buttons.play.addClass("fl-slideshow-nav-pause"),this.get("useFontIcons")&&void 0!==YUI.Env.mods["sm-fonticon"]&&(this._buttons.play.removeClass("sm-fonticon-PlayerPlay"),this._buttons.play.addClass("sm-fonticon-PlayerPause"))}},{CSS_PREFIX:"fl-slideshow-nav",COUNT_TEXT:"{current} of {total}",ATTRS:{buttons:{value:[],writeOnce:!0},buttonsLeft:{value:[],writeOnce:!0},buttonsRight:{value:[],writeOnce:!0},useFontIcons:{value:!0,writeOnce:!0}}}),b.namespace("FL").SlideshowOverlay=b.Base.create("fl-slideshow-overlay",b.Plugin.Base,[],{_focus:!1,_visible:!0,_disabled:!1,_showProps:{duration:.5,easing:"ease-out",opacity:1},_hideProps:{duration:.5,easing:"ease-out",opacity:0},_hideTimer:null,initializer:function(){var t=this.get("host").get("boundingBox");this.afterHostEvent("render",this._initFocus),this.afterHostEvent("render",this._initVisibility),this.get("closeButton")&&this._initCloseButton(),t.addClass("fl-slideshow-overlay")},destructor:function(){this._hideTimerCancel()},_initFocus:function(){var t=this.get("host").get("boundingBox");t.on("mouseenter",b.bind(this._setFocusOnMouseenter,this)),t.on("mouseleave",b.bind(this._setFocusOnMouseleave,this))},_initVisibility:function(){var t=this.get("host").get("boundingBox"),e=this.get("hideStyle");this.get("visible")||("display"==e?t.setStyle("display","none"):"left"==e&&t.setStyle("left","-99999px"),t.setStyle("opacity","0"),this._visible=!1)},_initCloseButton:function(){var t=this.get("host").get("boundingBox"),e=null;(e=b.Node.create('<a class="fl-slideshow-overlay-close" href="javascript:void(0);"></a>')).on("click",b.bind(this._closeButtonClick,this)),void 0!==YUI.Env.mods["sm-fonticon"]&&e.addClass("sm-fonticon sm-fonticon-XCrossEncircled sm-button-skin-default sm-button-nochrome"),t.insert(e)},_closeButtonClick:function(){this.get("host").get("boundingBox").transition(this._hideProps,b.bind(this._hideComplete,this))},_setFocusOnMouseenter:function(){this._focus=!0},_setFocusOnMouseleave:function(){this._focus=!1},disable:function(){this._disabled=!0},enable:function(){this._disabled=!1},show:function(){var t=this.get("host").get("boundingBox"),e=this.get("hideStyle");this._disabled||("display"==e?t.setStyle("display","block"):"left"==e&&t.setStyle("left","auto"),t.transition(this._showProps,b.bind(this._showComplete,this)),this.fire("showStart"))},_showComplete:function(){this._visible=!0,this.hideWithTimer(),this.fire("showComplete")},hide:function(){this._focus||this._disabled||(this.get("host").get("boundingBox").transition(this._hideProps,b.bind(this._hideComplete,this)),this.fire("hideStart"))},hideWithTimer:function(){this._hideTimerCancel(),this._hideTimer=b.later(this.get("hideDelay"),this,this.hide)},_hideTimerCancel:function(){this._hideTimer&&(this._hideTimer.cancel(),this._hideTimer=null)},_hideComplete:function(){var t=this.get("host").get("boundingBox"),e=this.get("hideStyle");"display"==e?t.setStyle("display","none"):"left"==e&&t.setStyle("left","-99999px"),this._visible=!1,this.fire("hideComplete")}},{NS:"slideshowOverlay",ATTRS:{closeButton:{value:!1,writeOnce:!0},hideDelay:{value:3e3,writeOnce:!0},hideStyle:{value:"display",writeOnce:!0},visible:{value:!0,writeOnce:!0}}}),b.namespace("FL").SlideshowSocial=b.Base.create("fl-slideshow-social",b.Widget,[b.WidgetChild],{_buttons:null,renderUI:function(){this._buttons={}},bindUI:function(){var t=this.get("root");t.get("likeButtonEnabled")&&t.on("imageLoadComplete",b.bind(this._updateLikeButton,this)),t.get("tweetButtonEnabled")&&t.on("imageLoadComplete",b.bind(this._updateTweetButton,this)),t.get("pinterestButtonEnabled")&&t.on("imageLoadComplete",b.bind(this._updatePinterestButton,this))},_updateLikeButton:function(){var t=null,e=this.get("contentBox"),i=this.get("root"),s=i.albumIndex,s=i.get("source")[s],i=i.imageInfo;this._buttons.like&&(this._buttons.like.remove(),this._buttons.like=null),"smugmug"==s.type?t=(t="https://www.facebook.com/plugins/like.php?")+"href=https://www.smugmug.com/services/graph/gallery/"+s.id+"_"+s.key+"/"+i.id+"_"+i.key:(t="https://www.facebook.com/plugins/like.php?",t+="href="+encodeURIComponent(i.largeURL)),this._buttons.like=b.Node.create('<iframe src="'+(t=(t=(t=(t+="&send=false")+"&layout=button_count"+"&width=90")+"&show_faces=false"+"&action=like")+"&colorscheme=light"+"&height=21")+'" scrolling="no" allowTransparency="true"></iframe>'),this._buttons.like.setStyles({overflow:"hidden",width:"90px",height:"21px"}),e.appendChild(this._buttons.like)},_updateTweetButton:function(){var t,e=this.get("root").imageInfo,i=this.get("contentBox");this._buttons.tweet&&(this._buttons.tweet.remove(),this._buttons.tweet=null),t="https://platform.twitter.com/widgets/tweet_button.html?",t+="url="+encodeURIComponent(e.largeURL),this._buttons.tweet=b.Node.create('<iframe src="'+(t+="&count=none")+'" scrolling="no" allowTransparency="true"></iframe>'),this._buttons.tweet.setStyles({overflow:"hidden",width:"90px",height:"21px"}),i.appendChild(this._buttons.tweet)},_updatePinterestButton:function(){var t="https://pinterest.com/pin/create/button/",e=this.get("root").imageInfo,i=this.get("contentBox");this._buttons.pin&&(this._buttons.pin.remove(),this._buttons.pin=null),t=(t=(t+="?url="+encodeURIComponent(window.location.href))+"&media="+encodeURIComponent(e.mediumURL))+"&description="+encodeURIComponent(e.caption),this._buttons.pin=b.Node.create("<a></a>"),this._buttons.pin.setAttribute("data-pin-config","none"),this._buttons.pin.setAttribute("data-pin-do","buttonPin"),this._buttons.pin.setAttribute("href",t),this._buttons.pin.setAttribute("target","_blank"),this._buttons.pin.set("innerHTML",'<img src="https://assets.pinterest.com/images/pidgets/pin_it_button.png" border="0" />'),i.appendChild(this._buttons.pin)}},{CSS_PREFIX:"fl-slideshow-social",ATTRS:{}}),b.namespace("FL").SlideshowThumbs=b.Base.create("fl-slideshow-thumbs",b.Widget,[b.WidgetParent,b.WidgetChild],{_clipBox:null,_pagesBox:null,_activePageBox:null,_activePageIndex:0,_nextPageBox:null,_activeImages:null,_nextImages:null,_prevImages:null,_leftNav:null,_rightNav:null,_topNav:null,_bottomNav:null,_bbHeight:0,_bbWidth:0,_cbWidth:0,_clipBoxMarginLeft:0,_clipBoxTop:0,_colsPerPage:0,_rowsPerPage:0,_imagesPerPage:0,_numPages:0,_pageHeight:0,_pageWidth:0,_horizontalSpacing:0,_verticalSpacing:0,_leftNavWidth:0,_rightNavWidth:0,_transition:null,_transitioning:!1,_transitionDirection:"next",_gestures:null,initializer:function(){this._activeImages=[],this._nextImages=[],this._prevImages=[]},renderUI:function(){this._renderBoxes(),this._renderNavs()},bindUI:function(){var t=this.get("root"),e=this.get("id"),i=this.get("transition");t.on(e+"|albumLoadComplete",this._albumLoadComplete,this),"ontouchstart"in window&&this.get("touchSupport")&&(this._gestures=new b.FL.SlideshowGestures({direction:"slideVertical"==i?"vertical":"horizontal",activeItem:this._activePageBox,nextItem:this._nextPageBox}),this._gestures.on("moveStart",this._gesturesMoveStart,this),this._gestures.on("endComplete",this._gesturesEndComplete,this))},syncUI:function(){this._syncBoxes(),this._syncNavs()},destructor:function(){var t=this.get("root"),e=this.get("id");t.detach(e+"|*"),b.FL.SlideshowImageLoader.removeGroup("thumbs")},unload:function(){var t=this.get("root"),e=this.get("id"),i=0;for(t.detach(e+"|imageLoadComplete"),b.FL.SlideshowImageLoader.removeGroup("thumbs");i<this._activeImages.length;i++)this._activeImages[i].unload()},resize:function(){this._setSizeInfo(),this._togglePageButtons(),this._resizeBoxes(),this._resizeNavs(),this.get("root").albumInfo&&(b.FL.SlideshowImageLoader.removeGroup("thumbs"),this._renderActivePage(),this._preloadNextPage(),this._preloadPrevPage()),this._gestures&&this._numPages<2?this._gestures.disable():this._gestures&&this._gestures.enable()},prevPage:function(){this._transitioning||this._transitionStart("prev")},nextPage:function(){this._transitioning||this._transitionStart("next")},_albumLoadComplete:function(){var t=this.get("root"),e=this.get("id");t.once(e+"|imageLoadComplete",this.resize,this),t.on(e+"|imageLoadComplete",this._imageLoadComplete,this)},_imageLoadComplete:function(){var t,e=this.get("root").albumInfo,i=b.one(".fl-slideshow-image-active"),s=i?i._imageInfo:null,n=this.get("root").imageInfo;this._setActiveImage(this._activeImages),t=b.one(".fl-slideshow-image-active"),i&&!t&&(0===n.index&&s.index===e.images.length-1?this.nextPage():0===s.index&&n.index===e.images.length-1?this.prevPage():s.index<n.index?this.nextPage():s.index>n.index&&this.prevPage())},_renderBoxes:function(){this._clipBox=b.Node.create("<div></div>"),this._clipBox.addClass("fl-slideshow-thumbs-clip"),this.get("contentBox").insert(this._clipBox),this._pagesBox=b.Node.create("<div></div>"),this._pagesBox.addClass("fl-slideshow-thumbs-pages"),this._clipBox.insert(this._pagesBox),this._activePageBox=b.Node.create("<div></div>"),this._activePageBox.addClass("fl-slideshow-thumbs-page"),this._pagesBox.insert(this._activePageBox),this._nextPageBox=b.Node.create("<div></div>"),this._nextPageBox.addClass("fl-slideshow-thumbs-page"),this._pagesBox.insert(this._nextPageBox)},_syncBoxes:function(){this._activePageBox.setStyle("left","0"),this._nextPageBox.setStyle("left","-9999px")},_resizeBoxes:function(){this.set("width",this._bbWidth),this.set("height",this._bbHeight),this.get("contentBox").setStyle("width",this._cbWidth+"px"),this._clipBox.setStyle("width",this._pageWidth+"px"),this._clipBox.setStyle("height",this._pageHeight+"px"),this._clipBox.setStyle("padding",this._verticalSpacing+"px 0 0 "+this._horizontalSpacing+"px "),this._clipBox.setStyle("margin","0 0 0 "+this._clipBoxMarginLeft+"px"),this._clipBox.setStyle("top",this._clipBoxTop),this._pagesBox.setStyle("width",this._pageWidth+"px"),this._pagesBox.setStyle("height",this._pageHeight+"px"),this._activePageBox.setStyle("width",this._pageWidth+"px"),this._activePageBox.setStyle("height",this._pageHeight+"px"),this._nextPageBox.setStyle("width",this._pageWidth+"px"),this._nextPageBox.setStyle("height",this._pageHeight+"px")},_renderActivePage:function(){var t=0,e=this.get("root"),i=this._imagesPerPage*this._activePageIndex,s=i+this._imagesPerPage,n=e.albumInfo.images;for(this._clearActiveImage();t<this._activeImages.length;t++)this._activeImages[t].remove(),this._activeImages[t].unload(),this._activeImages[t].get("boundingBox")._imageInfo=null,this._activeImages[t].get("boundingBox").remove();for(t=0;i<s&&n[i];i++)this._renderImage(this._activeImages,t,this._activePageBox,n[i]),t++;this._setActiveImage(this._activeImages)},_renderNextPage:function(){var t=0,e="next"==this._transitionDirection?this._nextImages:this._prevImages;for(this._nextPageBox.get("children").remove();t<e.length&&e[t]._imageInfo;t++)this._renderImage(e,t,this._nextPageBox,e[t]._imageInfo);this._setActiveImage(e)},_preloadNextPage:function(){var t=this._activePageIndex+1>=this._numPages?0:this._activePageIndex+1;this._preloadPage(t,this._nextImages)},_preloadPrevPage:function(){var t=this._activePageIndex-1<0?this._numPages-1:this._activePageIndex-1;this._preloadPage(t,this._prevImages)},_preloadPage:function(t,e){var i=0,s=this.get("root").albumInfo.images,n=t*this._imagesPerPage,a=n+this._imagesPerPage,t=this.get("imageConfig"),o=t.width,l=t.height;if(1<this._numPages){for(;i<e.length;i++)e[i].remove(),e[i].unload();for(i=0;n<a;n++)s[n]&&(this._renderImage(e,i),e[i].preload(s[n],o,l),i++)}},_renderImage:function(t,e,i,s){var n=null,a=this.get("imageConfig");void 0===t[e]&&(a.loadGroup="thumbs",a.useThumbSizes=!0,a.loadVideos=!1,t[e]=new b.FL.SlideshowImage(a),(n=t[e].get("boundingBox")).on("click",this._imageClick,this),n.on("mouseover",this._imageMouseover,this),n.on("mouseout",this._imageMouseout,this)),(n=t[e].get("boundingBox")).setStyle("margin","0 "+this._horizontalSpacing+"px "+this._verticalSpacing+"px 0"),i&&(this._childrenContainer=i,this.add(t[e]),t[e].resize(a.width,a.height)),s&&(t[e].load(s),n._imageInfo=s)},_uiAddChild:function(t,e){t.render(e),e.appendChild(t.get("boundingBox"))},_imageClick:function(t){var e=this.get("root");this.get("pauseOnClick")&&e.pause(),e.loadImage(t.currentTarget._imageInfo.index),this.fire("imageClick")},_setActiveImage:function(t){var e=0;for(this._clearActiveImage();e<t.length;e++)if(t[e]._imageInfo&&t[e]._imageInfo.index==this.get("root").imageInfo.index){t[e].get("boundingBox").addClass("fl-slideshow-image-active");break}},_clearActiveImage:function(){var t=b.one(".fl-slideshow-image-active");t&&t.removeClass("fl-slideshow-image-active")},_getTransition:function(){var t=this.get("transition");return"slideHorizontal"==t&&"next"==this._transitionDirection?"slideLeft":"slideHorizontal"==t&&"prev"==this._transitionDirection?"slideRight":"slideVertical"==t&&"next"==this._transitionDirection?"slideUp":"slideVertical"==t&&"prev"==this._transitionDirection?"slideDown":t},_transitionStart:function(t){1<this._numPages&&(b.FL.SlideshowImageLoader.removeGroup("thumbs"),this._transitionDirection=t,this._transitioning=!0,this._nextPageBox.setStyle("left","0px"),this._renderNextPage(),this._transition=new b.FL.SlideshowTransition({itemIn:this._nextPageBox,itemOut:this._activePageBox,type:this._getTransition(),duration:this.get("transitionDuration"),easing:this.get("transitionEasing")}),this._transition.once("complete",this._transitionComplete,this),this._transition.run(),this._gestures&&this._gestures.disable())},_transitionComplete:function(){this._swapPageRefs(),this._transitioning=!1,this._transitionDirection="",this._transition=null,this._gestures&&this._gestures.enable(),this.fire("transitionComplete")},_gesturesMoveStart:function(t){b.FL.SlideshowImageLoader.removeGroup("thumbs"),this._transitionDirection=t.direction,this._renderNextPage()},_gesturesEndComplete:function(){this._swapPageRefs(),this._transitionDirection="",this.fire("transitionComplete")},_swapPageRefs:function(){var t=this._activePageBox,e=this._activeImages;this._activePageBox=this._nextPageBox,this._nextPageBox=t,this._nextPageBox.setStyle("left","-9999px"),"next"==this._transitionDirection?(this._activeImages=this._nextImages,this._nextImages=e):(this._activeImages=this._prevImages,this._prevImages=e),"next"==this._transitionDirection&&this._activePageIndex+1<this._numPages?this._activePageIndex++:"next"==this._transitionDirection?this._activePageIndex=0:"prev"==this._transitionDirection&&-1<this._activePageIndex-1?this._activePageIndex--:"prev"==this._transitionDirection&&(this._activePageIndex=this._numPages-1),this._gestures&&(this._gestures.set("activeItem",this._activePageBox),this._gestures.set("nextItem",this._nextPageBox)),this._preloadNextPage(),this._preloadPrevPage()},_renderNavs:function(){var t=this.get("topNavButtons"),e=this.get("rightNavButtons"),i=this.get("bottomNavButtons"),s=this.get("leftNavButtons");this.get("topNavEnabled")&&0<t.length&&(this._topNav=new b.FL.SlideshowNav({buttons:t}),this._topNav.get("boundingBox").addClass("fl-slideshow-thumbs-top-nav"),this.add(this._topNav),this._topNav.render(this.get("contentBox")),this._clipBox.insert(this._topNav.get("boundingBox"),"before"),this._bindNavEvents(this._topNav)),this.get("rightNavEnabled")&&0<e.length&&(this._rightNav=new b.FL.SlideshowNav({buttons:e}),this._rightNav.get("boundingBox").addClass("fl-slideshow-thumbs-right-nav"),this.add(this._rightNav),this._rightNav.render(this.get("contentBox")),this._bindNavEvents(this._rightNav)),this.get("bottomNavEnabled")&&0<i.length&&(this._bottomNav=new b.FL.SlideshowNav({buttons:i}),this._bottomNav.get("boundingBox").addClass("fl-slideshow-thumbs-bottom-nav"),this.add(this._bottomNav),this._bottomNav.render(this.get("contentBox")),this._bindNavEvents(this._bottomNav)),this.get("leftNavEnabled")&&0<s.length&&(this._leftNav=new b.FL.SlideshowNav({buttons:s}),this._leftNav.get("boundingBox").addClass("fl-slideshow-thumbs-left-nav"),this.add(this._leftNav),this._leftNav.render(this.get("contentBox")),this._bindNavEvents(this._leftNav))},_syncNavs:function(){var t;this._rightNav&&((t=this._rightNav.get("boundingBox")).setStyle("position","absolute"),t.setStyle("top","0px"),t.setStyle("right","0px")),this._bottomNav&&((t=this._bottomNav.get("boundingBox")).setStyle("position","absolute"),t.setStyle("bottom","0px"),t.setStyle("width","100%")),this._leftNav&&((t=this._leftNav.get("boundingBox")).setStyle("position","absolute"),t.setStyle("top","0px"),t.setStyle("left","0px"))},_resizeNavs:function(){var t,e;this._rightNav&&(t=this._rightNav.get("boundingBox"),e=this._bbHeight/2-parseInt(t.getComputedStyle("height"),10)/2,t.setStyle("marginTop",e+"px")),this._leftNav&&(t=this._leftNav.get("boundingBox"),e=this._bbHeight/2-parseInt(t.getComputedStyle("height"),10)/2,t.setStyle("marginTop",e+"px"))},_bindNavEvents:function(t){t._buttons.prevPage&&t._buttons.prevPage.on("click",this.prevPage,this),t._buttons.nextPage&&t._buttons.nextPage.on("click",this.nextPage,this),t.on("resize",this.resize,this)},_togglePageButtons:function(){var t=this.get("boundingBox").all(".fl-slideshow-nav-prevPage, .fl-slideshow-nav-nextPage"),e=t.getStyle("display")[0];1==this._numPages&&"inline-block"==e?(t.setStyle("display","none"),this._setSizeInfo()):1<this._numPages&&"none"==e&&(t.setStyle("display","inline-block"),this._setSizeInfo())},_setSizeInfo:function(){var t,e=this.get("root"),i=this.get("boundingBox"),s=i.getStyle("position"),n=parseInt(i.getStyle("marginLeft"),10),a=parseInt(i.getStyle("marginRight"),10),o=parseInt(i.getStyle("marginTop"),10),l=parseInt(i.getStyle("marginBottom"),10),h=parseInt(i.getStyle("paddingLeft"),10),r=parseInt(i.getStyle("paddingRight"),10),g=parseInt(i.getStyle("paddingTop"),10),u=parseInt(i.getStyle("paddingBottom"),10),d=i.get("parentNode"),h=parseInt(d.getComputedStyle("width"),10)-h-r-n-a,r=parseInt(d.getComputedStyle("height"),10)-g-u-o-l,n=h,a=h,d=r,g=this.get("columns"),u=this.get("rows"),o=this.get("imageConfig"),l=this.get("horizontalSpacing"),m=this.get("verticalSpacing"),c=this.get("spaceEvenly"),_=this.get("centerSinglePage"),v=0,p=0,f=0,b=0,y=g,x=u,I=1,S=0,w=0,T=0,B=0;i.setStyle("position","relative"),isNaN(g)||(h=a=g*(o.width+l)+l),isNaN(u)||(r=d=u*(o.height+m)+m),this._leftNav&&(v=parseInt(this._leftNav.get("boundingBox").getComputedStyle("width"),10),isNaN(g)?a-=v:h+=v),this._rightNav&&(p=parseInt(this._rightNav.get("boundingBox").getComputedStyle("width"),10),isNaN(g)?a-=p:h+=p),this._topNav&&(f=parseInt(this._topNav.get("boundingBox").getComputedStyle("height"),10),isNaN(u)?d-=f:r+=f),this._bottomNav&&(b=parseInt(this._bottomNav.get("boundingBox").getComputedStyle("height"),10),isNaN(u)?d-=b:r+=b),t=(y=isNaN(g)?(y=Math.floor(a/(o.width+l)))<1?1:y:y)*(x=isNaN(u)?(x=Math.floor(d/(o.height+m)))<1?1:x:x),e.albumInfo&&(I=Math.ceil(e.albumInfo.images.length/t)),isNaN(g)&&c&&(l=Math.floor((a-o.width*y)/(y+1))),isNaN(u)&&c&&(m=Math.floor((d-o.height*x)/(x+1))),e.albumInfo&&_&&1==I&&1==x?(n=e.albumInfo.images.length*o.width,n+=l*(e.albumInfo.images.length+1),this._leftNav&&(n+=v),this._rightNav&&(n+=p)):n=h,e.albumInfo&&_&&1==I&&1==x?(a=e.albumInfo.images.length*o.width,a+=l*e.albumInfo.images.length):a=y*(o.width+l),d=x*(o.height+m),S=I<2?v:(T=h,this._rightNav&&(T-=p),this._leftNav?v+((T-=v)-a-l)/2:(T-a-l)/2),1<I&&!c&&(B=r,this._topNav&&(B-=f),this._bottomNav&&(B-=b),w=(B-(m+d))/2),this._bbHeight=r,this._bbWidth=h,this._cbWidth=n,this._clipBoxMarginLeft=S,this._clipBoxTop=w,this._colsPerPage=y,this._rowsPerPage=x,this._imagesPerPage=t,this._numPages=I,this._pageHeight=d,this._pageWidth=a,this._leftNavWidth=v,this._rightNavWidth=p,this._horizontalSpacing=l,this._verticalSpacing=m,this._activePageIndex=Math.floor(e.imageIndex/this._imagesPerPage),i.setStyle("position",s)}},{CSS_PREFIX:"fl-slideshow-thumbs",ATTRS:{columns:{value:"auto"},rows:{value:"auto"},horizontalSpacing:{value:15},verticalSpacing:{value:15},spaceEvenly:{value:!0},centerSinglePage:{value:!0},pauseOnClick:{value:!1},transition:{value:"slideHorizontal"},transitionDuration:{value:.8},transitionEasing:{value:"ease-out"},imageConfig:{value:{crop:!0,width:50,height:50}},topNavEnabled:{value:!1},topNavButtons:{value:["prevPage","nextPage"]},rightNavEnabled:{value:!0},rightNavButtons:{value:["nextPage"]},bottomNavEnabled:{value:!1},bottomNavButtons:{value:["prevPage","nextPage"]},leftNavEnabled:{value:!0},leftNavButtons:{value:["prevPage"]},touchSupport:{value:!1}}}),b.namespace("FL").SlideshowTransition=b.Base.create("fl-slideshow-transition",b.Base,[],{_transitionFunction:"_transitionFade",_type:"fade",initializer:function(){var t=this.get("type"),e=[],i=b.FL.SlideshowTransition.TYPES,s=b.FL.SlideshowTransition.SLIDESHOW_IMAGE_TYPES,s=-1<b.Array.indexOf(s,t),n=this._isSlideshowImage(),a=this.get("itemIn"),o=this.get("itemOut");-1<t.indexOf(",")&&((e=t.split(",")).sort(function(){return.5-Math.random()}),t=e[0]),!n&&s?t="fade":n&&(a&&null===a.one("img")||o&&null===o.one("img")?t="none":s&&(b.UA.gecko&&b.UA.gecko<5||0<b.UA.opera||0<b.UA.ie&&b.UA.ie<9)&&(t="fade")),b.FL.SlideshowTransition.TYPES[t]&&(this._transitionFunction=i[t],this._type=t),this._setupItems()},run:function(){this.fire("start"),this[this._transitionFunction].call(this)},_setupItems:function(){var t=this.get("itemIn"),e=this.get("itemOut");t&&(t.setStyle("zIndex",2),t.setStyle("opacity",1),b.FL.Utils.cssSupport("transform")?t.setStyle("transform","translate(0, 0)"):(t.setStyle("top","0"),t.setStyle("left","0"))),e&&e.setStyle("zIndex",1)},_isSlideshowImage:function(){var t=this.get("itemIn"),e=this.get("itemOut");return!(!t||!t.hasClass("fl-slideshow-image"))||!(!e||!e.hasClass("fl-slideshow-image"))},_transitionStart:function(t,e){var i=this.get("itemIn"),s=this.get("itemOut"),n=b.bind(this._transitionComplete,this),a=i?null:n,o=this.get("duration"),l=this.get("easing");i&&(t.duration=t.duration||o,t.easing=t.easing||l,i.transition(t)),s&&(e.duration=e.duration||o,e.easing=e.easing||l,s.transition(e)),n?b.later(1e3*t.duration+100,null,n):a&&b.later(1e3*e.duration+100,null,a)},_transitionComplete:function(){this._set("itemIn",null),this._set("itemOut",null),this.fire("complete")},_transitionNone:function(){var t=this.get("itemIn"),e=this.get("itemOut");t&&t.setStyle("opacity",1),e&&e.setStyle("opacity",0),this._transitionComplete()},_transitionFade:function(){var t=this.get("itemIn");t&&t.setStyle("opacity",0),this._transitionStart({opacity:1},{opacity:0})},_transitionSlideLeft:function(){b.FL.Utils.cssSupport("transform")?this._cssTransitionSlide({inStart:"translate(100%, 0)",inEnd:"translate(0, 0)",outStart:"translate(0, 0)",outEnd:"translate(-100%, 0)"}):this._jsTransitionSlide("left")},_transitionSlideRight:function(){b.FL.Utils.cssSupport("transform")?this._cssTransitionSlide({inStart:"translate(-100%, 0)",inEnd:"translate(0, 0)",outStart:"translate(0, 0)",outEnd:"translate(100%, 0)"}):this._jsTransitionSlide("right")},_transitionSlideUp:function(){b.FL.Utils.cssSupport("transform")?this._cssTransitionSlide({inStart:"translate(0, 100%)",inEnd:"translate(0, 0)",outStart:"translate(0, 0)",outEnd:"translate(0, -100%)"}):this._jsTransitionSlide("up")},_transitionSlideDown:function(){b.FL.Utils.cssSupport("transform")?this._cssTransitionSlide({inStart:"translate(0, -100%)",inEnd:"translate(0, 0)",outStart:"translate(0, 0)",outEnd:"translate(0, 100%)"}):this._jsTransitionSlide("down")},_jsTransitionSlide:function(t){var e=this.get("itemIn"),i=this.get("itemOut"),s=0;i&&"left"==t&&(s=-parseInt(i.getStyle("width"),10)),i&&"right"==t&&(s=parseInt(i.getStyle("width"),10)),i&&"up"==t&&(s=-parseInt(i.getStyle("height"),10)),i&&"down"==t&&(s=parseInt(i.getStyle("height"),10)),e&&e.setStyle("opacity",1),e&&"left"==t&&e.setStyle("left",e.getStyle("width")),e&&"right"==t&&e.setStyle("left","-"+e.getStyle("width")),e&&"up"==t&&e.setStyle("top",e.getStyle("height")),e&&"down"==t&&e.setStyle("top","-"+e.getStyle("height")),"left"==t||"right"==t?this._transitionStart({left:0},{left:s}):this._transitionStart({top:0},{top:s})},_cssTransitionSlide:function(t){var e=this.get("itemIn"),i=this.get("itemOut"),s=b.UA.chrome<36?"transform":"-webkit-transform",n={},a={};n[s]=t.inEnd,a[s]=t.outEnd,e&&(e.setStyle("transition",""),e.setStyle("opacity",1),e.setStyle(s,t.inStart)),i&&(i.setStyle("transition",""),i.setStyle(s,t.outStart)),this._transitionStart(n,a)},_transitionBars:function(){this.get("itemIn").one(".fl-slideshow-image-img").setStyle("opacity",0);var t,e=this.get("bars"),i=this._renderSlices(1,e),s=0,n=100,a=0,o=null,l={duration:this.get("duration"),opacity:1};for("barsRandom"==this._type&&(i=this._randomizeSlices(i));a<i.length;a++)o=b.clone(l),"blinds"==this._type&&(o.width=parseFloat(i[a].getComputedStyle("width"),10)+"px",i[a].setStyle("width","0px"),n=50),t=a==i.length-1,b.later(s,this,this._transitionSlice,[i[a],o,t]),s+=n;this._transitionSlicesFadeLast(s)},_transitionBoxes:function(){this.get("itemIn").one(".fl-slideshow-image-img").setStyle("opacity",0);var t=this.get("boxCols"),e=this.get("boxRows"),i=t*e,s="boxesRandom"!=this._type,n=this._renderSlices(e,t,s),a=0,o=150,l=!1,h=0,r=0,g=0,u=-1,d=null,m={duration:this.get("duration"),opacity:1};if(s)for(;h<i;){for(r=0;r<e;r++)-1<(g=0===r?++u:g)&&g<t&&(h++,d=b.clone(m),"boxesGrow"==this._type&&(d.height=parseFloat(n[r][g].getComputedStyle("height"),10)+"px",d.width=parseFloat(n[r][g].getComputedStyle("width"),10)+"px",n[r][g].setStyle("height","0px"),n[r][g].setStyle("width","0px"),o=50),b.later(a,this,this._transitionSlice,[n[r][g],d,l=h==i-1])),g--;a+=o}else for(n=this._randomizeSlices(n),o=30;h<n.length;h++)d=b.clone(m),l=h==n.length-1,b.later(a,this,this._transitionSlice,[n[h],d,l]),a+=o;this._transitionSlicesFadeLast(a)},_renderSlices:function(t,e,i){for(var s=this.get("itemIn"),n=parseFloat(s.getComputedStyle("height"),10),a=parseFloat(s.getComputedStyle("width"),10),o=s.one("img"),l=o.get("src"),h=parseFloat(o.getComputedStyle("height"),10),r=parseFloat(o.getComputedStyle("width"),10),g=parseFloat(o.getComputedStyle("left"),10),u=parseFloat(o.getComputedStyle("top"),10),d=0,m=0,c=Math.round(n/t),_=Math.round(a/e),v=null,p=null,f=[];m<t;m++)for(void 0!==i&&i&&(f[m]=[]),d=0;d<e;d++)v=b.Node.create('<div class="fl-slideshow-transition-slice"></div>'),p=b.Node.create('<img src="'+l+'" />'),v.setStyles({left:_*d+"px",top:c*m+"px",width:d==e-1?a-_*d+"px":_+"px",height:m==t-1?n-c*m+"px":c+"px",opacity:0}),p.setStyles({height:h+"px",width:r+"px",top:u-(c+m*c-c)+"px",left:g-(_+d*_-_)+"px"}),v.append(p),s.append(v),(void 0!==i&&i?f[m]:f).push(v);return f},_transitionSlicesFadeLast:function(t){var e=this.get("itemOut");e&&!e.hasClass("fl-slideshow-image-cropped")&&e.transition({duration:t/1e3+this.get("duration"),opacity:0})},_transitionSlice:function(t,e,i){i=i?b.bind(this._transitionSlicesComplete,this):null;t.transition(e,i)},_transitionSlicesComplete:function(){var t=this.get("itemIn");t.all(".fl-slideshow-transition-slice").remove(),t.one(".fl-slideshow-image-img").setStyle("opacity",1),this._transitionComplete()},_randomizeSlices:function(t){var e,i,s=t.length;if(0!==s){for(;--s;)e=Math.floor(Math.random()*(s+1)),i=t[s],t[s]=t[e],t[e]=i;return t}},_transitionKenBurns:function(){var t=this.get("kenBurnsDuration"),e=this.get("duration"),i=this.get("itemIn"),s=this.get("kenBurnsZoom");this._transitionFade(),new b.FL.SlideshowKenBurns({duration:t+e+4,image:i,zoom:s}).run()}},{ATTRS:{itemIn:{value:null},itemOut:{value:null},duration:{value:.5},easing:{value:"ease-out"},type:{value:"fade"},bars:{value:15},boxCols:{value:8},boxRows:{value:4},kenBurnsDuration:{value:4},kenBurnsZoom:{value:1.2}},TYPES:{fade:"_transitionFade",none:"_transitionNone",slideLeft:"_transitionSlideLeft",slideRight:"_transitionSlideRight",slideUp:"_transitionSlideUp",slideDown:"_transitionSlideDown",blinds:"_transitionBars",bars:"_transitionBars",barsRandom:"_transitionBars",boxes:"_transitionBoxes",boxesRandom:"_transitionBoxes",boxesGrow:"_transitionBoxes",kenBurns:"_transitionKenBurns"},SLIDESHOW_IMAGE_TYPES:["blinds","bars","barsRandom","boxes","boxesRandom","boxesGrow","kenBurns"]}),b.namespace("FL").Slideshow=b.Base.create("fl-slideshow",b.FL.SlideshowBase,[],{frame:null,nav:null,imageNavLeft:null,imageNavRight:null,thumbs:null,verticalThumbs:null,caption:null,social:null,_nextImagePreloader:null,_initialNavSettings:null,initializer:function(){var t={loadGroup:"main-preload",crop:this.get("crop"),position:this.get("position"),protect:this.get("protect"),upsize:this.get("upsize")};this._nextImagePreloader=new b.FL.SlideshowImage(t),this._isMobile()&&(this._removeNavButton("prevPage"),this._removeNavButton("nextPage"),this._removeNavButton("fullscreen")),this._hasNavButton("fullscreen")&&(b.FL.SlideshowFullscreen.OS_SUPPORT?this.plug(b.FL.SlideshowFullscreen):this._removeNavButton("fullscreen"))},renderUI:function(){b.FL.Slideshow.superclass.renderUI.apply(this,arguments),this._renderFrame(),this._renderVerticalThumbs(),this._renderNavAndThumbs(),this._renderImageNav(),this._renderMouseNav(),this._renderCaption(),this._renderSocial()},bindUI:function(){var t=this.get("boundingBox"),e=this.frame.get("boundingBox"),i=this.get("navOverlay"),s=this.get("navType"),n=this._getNav(),a=this.get("clickAction");b.FL.Slideshow.superclass.bindUI.apply(this,arguments),b.Do.after(this._resizeChildWidgets,this,"resize"),this.on("albumLoadStart",this._albumLoadStart,this),this.on("albumLoadComplete",this._albumLoadComplete,this),this.on("imageLoadComplete",this._loadFrame,this),this.get("loadingImageAlwaysEnabled")&&(this.frame.on("transitionInit",b.bind(this._showLoadingImageWithDelay,this)),this.frame.on("transitionStart",b.bind(this._hideLoadingImage,this))),this.get("overlayHideOnMousemove")&&(n&&i&&(this.frame.once("transitionComplete",n.slideshowOverlay.hideWithTimer,n.slideshowOverlay),t.on("mousemove",b.bind(this._toggleNav,this))),"buttons"!=s&&"thumbs"!=s&&"custom"!=s||(t.on("mouseenter",b.bind(this._checkOverlaysOnMouseenter,this)),t.on("mouseleave",b.bind(this._hideAllOverlays,this)))),t.delegate("click",b.bind(this._overlayCloseClick,this),".fl-slideshow-overlay-close"),"gallery"!=a&&"url"!=a||e.delegate("click",b.bind(this._frameClick,this),".fl-slideshow-image-img")},syncUI:function(){var t=this.get("boundingBox");b.FL.Slideshow.superclass.syncUI.apply(this,arguments),t._node.onselectstart=function(){return!1},t._node.unselectable="on",(t._node.style.MozUserSelect="none")!=this.get("clickAction")&&this.frame.get("boundingBox").addClass("fl-click-action-enabled")},_isMobile:function(){return/Mobile|Android|Silk\/|Kindle|BlackBerry|Opera Mini|Opera Mobi|webOS/i.test(navigator.userAgent)},unload:function(){this.pause(),this.frame.unload(),null!==this.thumbs&&this.thumbs.unload()},_albumLoadStart:function(){this._showLoadingImage()},_albumLoadComplete:function(){this.frame.once("transitionStart",b.bind(this._hideLoadingImage,this))},_resizeChildWidgets:function(){var t=this.get("boundingBox"),e=this.get("contentBox"),i=this.get("imageNavEnabled");this._renderNavAndThumbs(),this.get("verticalThumbsOverlay")?(this._resizeFrame(e.get("offsetWidth"),t.get("offsetHeight")),this._resizeVerticalThumbs()):(this._resizeVerticalThumbs(),this._resizeFrame(e.get("offsetWidth"),t.get("offsetHeight"))),i&&this._positionImageNav(),this._positionLoadingImage()},_renderVerticalThumbs:function(){var t=this.get("responsiveThreshold"),e=this.get("boundingBox"),i=e.get("offsetWidth");this.get("verticalThumbsEnabled")&&t<i&&(this.verticalThumbs=new b.FL.SlideshowThumbs(this._getVerticalThumbsConfig()),this.add(this.verticalThumbs),this.verticalThumbs.render(e),(t=this.verticalThumbs.get("boundingBox")).addClass("fl-slideshow-vertical-thumbs"),t.setStyle(this.get("verticalThumbsPosition"),0),e.append(t),this.get("verticalThumbsOverlay")?(this.verticalThumbs.plug(b.FL.SlideshowOverlay,{hideDelay:this.get("overlayHideDelay"),hideStyle:"left"}),this.frame.get("boundingBox").append(t),this.verticalThumbs.resize()):(this.verticalThumbs.resize(),this._adjustContentForVerticalThumbs()),this._bindVerticalThumbs())},_getVerticalThumbsConfig:function(){var t=this.getAttrs();return{columns:t.verticalThumbsColumns,rows:"auto",centerSinglePage:!1,horizontalSpacing:t.verticalThumbsHorizontalSpacing,verticalSpacing:t.verticalThumbsVerticalSpacing,spaceEvenly:t.verticalThumbsSpaceEvenly,rightNavEnabled:!1,leftNavEnabled:!1,topNavEnabled:t.verticalThumbsTopNavEnabled,topNavButtons:t.verticalThumbsTopNavButtons,bottomNavEnabled:t.verticalThumbsBottomNavEnabled,bottomNavButtons:t.verticalThumbsBottomNavButtons,pauseOnClick:t.verticalThumbsPauseOnClick,transition:t.verticalThumbsTransition,transitionDirection:t.verticalThumbsTransitionDirection,transitionEasing:t.verticalThumbsTransitionEasing,touchSupport:!0,imageConfig:{crop:t.verticalThumbsImageCrop,width:t.verticalThumbsImageWidth,height:t.verticalThumbsImageHeight}}},_bindVerticalThumbs:function(){var t=this.get("boundingBox"),e=this.get("overlayHideOnMousemove"),i=this.get("verticalThumbsOverlay"),s=this.verticalThumbs;s&&e&&i&&(this.frame.once("transitionComplete",s.slideshowOverlay.hideWithTimer,s.slideshowOverlay),t.on("mousemove",b.bind(this._toggleVerticalThumbs,this)),t.on("mouseenter",b.bind(this._toggleVerticalThumbs,this)))},_resizeVerticalThumbs:function(){var t,e,i,s,n,a;this.get("verticalThumbsEnabled")&&(t=this.get("verticalThumbsOverlay"),e=this.get("responsiveThreshold"),i=this.get("boundingBox").get("offsetWidth"),a=this.get("navOverlay"),s=this.get("navType"),n=this._getNav(),this.verticalThumbs&&e<i?(this.verticalThumbs.get("boundingBox").setStyle("display","block"),this.verticalThumbs.resize(),t?n&&a&&(a=n.get("boundingBox"),"thumbs"==s?(this._adjustOverlayForVerticalThumbs(a,!0),this.thumbs.resize()):this._adjustOverlayForVerticalThumbs(a)):this._adjustContentForVerticalThumbs()):!this.verticalThumbs&&e<i?this._renderVerticalThumbs():this.verticalThumbs&&i<=e&&(this.verticalThumbs.get("boundingBox").setStyle("display","none"),t||this.get("contentBox").setStyles({left:"auto",position:"relative",right:"auto",width:"auto"})))},_toggleVerticalThumbs:function(){this.verticalThumbs&&(this.verticalThumbs.slideshowOverlay._visible?this.verticalThumbs.slideshowOverlay.hideWithTimer():this.verticalThumbs.slideshowOverlay.show())},_adjustContentForVerticalThumbs:function(){var t=this.get("boundingBox"),e=this.verticalThumbs.get("boundingBox"),i=this.get("verticalThumbsPosition"),s=this.get("contentBox"),i="left"==i?"right":"left",t=t.get("offsetWidth")-e.get("offsetWidth");s.setStyle("position","absolute"),s.setStyle(i,0),s.setStyle("width",t)},_adjustOverlayForVerticalThumbs:function(t,e){var i=this.get("verticalThumbsEnabled"),s=this.get("verticalThumbsOverlay"),e=void 0===e?"":"margin-";this.verticalThumbs&&i&&s&&(i=this.verticalThumbs.get("boundingBox").get("offsetWidth"),"left"==this.get("verticalThumbsPosition")?t.setStyle(e+"left",i+"px"):t.setStyle(e+"right",i+"px"))},_renderFrame:function(){this.frame=new b.FL.SlideshowFrame({imageConfig:{loadGroup:"main",loadPriority:!0,crop:this.get("crop"),cropHorizontalsOnly:this.get("cropHorizontalsOnly"),position:this.get("position"),protect:this.get("protect"),upsize:this.get("upsize"),showVideoButton:this.get("navOverlay")},touchSupport:this.get("touchSupport")}),this.add(this.frame),this.frame.render(this.get("contentBox")),this.frame.get("boundingBox").addClass("fl-slideshow-main-image"),this._setPlayingTimerEvent(this.frame,"transitionComplete"),this._loadingImageContainer=this.frame.get("contentBox")},_resizeFrame:function(t,e){var i=this.get("navOverlay"),s=this._getNav();s&&!i&&(e-=parseInt(s.get("boundingBox").getComputedStyle("height"),10)),this.frame.resize(t,e)},_loadFrame:function(t){var e=this.imageInfo.index,i=this.albumInfo.images,e=e+1>=i.length?0:e+1,s=this.frame.get("width"),n=this.frame.get("height");this.frame.load(t.imageInfo),b.FL.SlideshowImageLoader.removeGroup("main-preload"),this._nextImagePreloader.preload(i[e],s,n)},_frameClick:function(){var t=this.get("clickAction"),e=this.get("clickActionUrl");"url"==t?window.location.href=e:"gallery"==t&&(window.location.href=this.imageInfo.link)},_initMiniNav:function(){var t=[];this._hasNavButton("prev")&&t.push("prev"),!this._hasNavButton("thumbs")&&"thumbs"!=this.get("navType")||t.push("thumbs"),this._hasNavButton("caption")&&t.push("caption"),this._hasNavButton("social")&&t.push("social"),this._hasNavButton("buy")&&t.push("buy"),this._hasNavButton("play")&&t.push("play"),!this._hasNavButton("fullscreen")||"ontouchstart"in window||t.push("fullscreen"),this._hasNavButton("next")&&t.push("next"),this._initialNavSettings={buttons:this.get("navButtons"),buttonsLeft:this.get("navButtonsLeft"),buttonsRight:this.get("navButtonsRight"),type:this.get("navType")},this._set("navButtons",t),this._set("navButtonsLeft",[]),this._set("navButtonsRight",[]),this._set("navType","buttons")},_renderNavAndThumbs:function(){var t,e=this.get("navType"),i=!1;"buttons"!=e&&"thumbs"!=e||((e=this.get("boundingBox").get("offsetWidth"))<=(t=this.get("responsiveThreshold"))&&null===this._initialNavSettings?(this._initMiniNav(),i=!0):t<e&&null!==this._initialNavSettings&&(this._set("navButtons",this._initialNavSettings.buttons),this._set("navButtonsLeft",this._initialNavSettings.buttonsLeft),this._set("navButtonsRight",this._initialNavSettings.buttonsRight),this._set("navType",this._initialNavSettings.type),i=!(this._initialNavSettings=null)),!i&&null!==this.nav||this._renderNav(),i||null===this.thumbs?this._renderThumbs():this._thumbsEnabled()&&this._resizeThumbs(),i&&null!==this.caption&&this._syncCaption(),i&&null!==this.social&&this._syncSocial())},_renderNav:function(){var t=this.frame.get("boundingBox"),e=null,i=this.get("navOverlay"),s=this.get("navPosition");this._destroyNav(),"buttons"==this.get("navType")&&(this.nav=new b.FL.SlideshowNav({buttons:this.get("navButtons"),buttonsLeft:this.get("navButtonsLeft"),buttonsRight:this.get("navButtonsRight")}),this.add(this.nav),this.nav.render(this.get("contentBox")),e=this.nav.get("boundingBox"),i&&(this.nav.plug(b.FL.SlideshowOverlay,{hideDelay:this.get("overlayHideDelay")}),e.setStyle("position","absolute"),e.setStyle(s,"0px")),"top"==s?t.insert(e,"before"):t.insert(e,"after"),e.addClass("fl-slideshow-main-nav"))},_destroyNav:function(){if(null!==this.nav){this.nav.slideshowOverlay&&this.nav.slideshowOverlay.destroy(),this.nav.get("boundingBox").remove(),this.remove(this.nav);try{this.nav.destroy(!0)}catch(t){}this.nav=null}},_getNav:function(){var t=this.get("navType");return"buttons"==t?this.nav:"thumbs"==t?this.thumbs:null},_toggleNav:function(){var t=this._getNav();t.slideshowOverlay&&(t.slideshowOverlay._visible?t.slideshowOverlay.hideWithTimer():t.slideshowOverlay.show())},_renderImageNav:function(){var t;this.get("imageNavEnabled")&&(this._isMobile()?this._set("imageNavEnabled",!1):(t=this.get("boundingBox"),this.imageNavLeft=new b.FL.SlideshowNav({buttons:["prev"],useFontIcons:!1}),this.imageNavRight=new b.FL.SlideshowNav({buttons:["next"],useFontIcons:!1}),this.add(this.imageNavLeft),this.add(this.imageNavRight),this.imageNavLeft.render(this.frame.get("boundingBox")),this.imageNavRight.render(this.frame.get("boundingBox")),this.imageNavLeft.plug(b.FL.SlideshowOverlay,{hideDelay:this.get("overlayHideDelay")}),this.imageNavRight.plug(b.FL.SlideshowOverlay,{hideDelay:this.get("overlayHideDelay")}),this.get("overlayHideOnMousemove")&&(this.frame.once("transitionComplete",this.imageNavLeft.slideshowOverlay.hideWithTimer,this.imageNavLeft.slideshowOverlay),this.frame.once("transitionComplete",this.imageNavRight.slideshowOverlay.hideWithTimer,this.imageNavRight.slideshowOverlay),t.on("mousemove",b.bind(this._toggleImageNav,this)),t.on("mouseenter",b.bind(this._toggleImageNav,this))),this.imageNavLeft.get("boundingBox").addClass("fl-slideshow-image-nav-left"),this.imageNavRight.get("boundingBox").addClass("fl-slideshow-image-nav-right")))},_positionImageNav:function(){var t=this.imageNavLeft.get("boundingBox"),e=this.imageNavRight.get("boundingBox"),i=t.get("offsetHeight"),i={top:this.frame.get("boundingBox").get("offsetHeight")/2-i/2+"px",display:"block"};t.setStyles(i),e.setStyles(i),this._adjustOverlayForVerticalThumbs(t),this._adjustOverlayForVerticalThumbs(e)},_toggleImageNav:function(){this.imageNavLeft.slideshowOverlay._visible?this.imageNavLeft.slideshowOverlay.hideWithTimer():this.imageNavLeft.slideshowOverlay.show(),this.imageNavRight.slideshowOverlay._visible?this.imageNavRight.slideshowOverlay.hideWithTimer():this.imageNavRight.slideshowOverlay.show()},_renderMouseNav:function(){!this.get("mouseNavEnabled")||"ontouchstart"in window||window.navigator.msPointerEnabled||this.plug(b.FL.SlideshowMouseNav,{trigger:this.frame.get("boundingBox")})},_thumbsEnabled:function(){var t=this.get("navType");return"thumbs"==t||!("buttons"!=t&&"custom"!=t||!this._hasNavButton("thumbs"))},_renderThumbs:function(){var t,e,i,s;if(this._destroyThumbs(),this._thumbsEnabled()){t=this.frame.get("boundingBox"),e=this.get("navOverlay"),i=this.get("navPosition"),s=this.get("navType"),this.thumbs=new b.FL.SlideshowThumbs(this._getThumbsConfig());try{this.add(this.thumbs)}catch(t){}"buttons"==s||"custom"==s?this.thumbs.plug(b.FL.SlideshowOverlay,{hideDelay:this.get("overlayHideDelay"),hideStyle:"left",visible:!1}):"thumbs"==s&&e&&this.thumbs.plug(b.FL.SlideshowOverlay,{hideDelay:this.get("overlayHideDelay"),hideStyle:"left"}),this.thumbs.render(this.get("contentBox")),"top"==i?t.insert(this.thumbs.get("boundingBox"),"before"):t.insert(this.thumbs.get("boundingBox"),"after"),this.get("thumbsHideOnClick")&&"thumbs"!=s&&this.thumbs.on("imageClick",b.bind(this._hideThumbsOnImageClick,this)),this._syncThumbs()}},_destroyThumbs:function(){if(null!==this.thumbs){this.thumbs.slideshowOverlay&&this.thumbs.slideshowOverlay.destroy(),this.thumbs.get("boundingBox").remove(),this.remove(this.thumbs);try{this.thumbs.destroy(!0)}catch(t){}this.thumbs=null}},_syncThumbs:function(){var t,e=this.thumbs.get("boundingBox"),i=this.get("navOverlay"),s=this.get("navPosition"),n=this.get("navType"),a="padding"+s.charAt(0).toUpperCase()+s.slice(1);"buttons"==n&&(t=parseInt(this.nav.get("boundingBox").getComputedStyle("height"),10),e.setStyle("position","absolute"),i?(e.setStyle(a,t+"px"),e.setStyle(s,"0px")):e.setStyle(s,t+"px")),("custom"==n||"thumbs"==n&&i)&&(e.setStyle("position","absolute"),e.setStyle(s,"0px")),this.thumbs.resize()},_getThumbsConfig:function(){var t=this.getAttrs(),e=this.get("navType"),i={crop:t.thumbsImageCrop,width:t.thumbsImageWidth,height:t.thumbsImageHeight},t={columns:"auto",rows:1,horizontalSpacing:t.thumbsHorizontalSpacing,verticalSpacing:t.thumbsVerticalSpacing,spaceEvenly:t.thumbsSpaceEvenly,centerSinglePage:t.thumbsCenterSinglePage,pauseOnClick:t.thumbsPauseOnClick,transition:t.thumbsTransition,transitionDirection:t.thumbsTransitionDirection,transitionEasing:t.thumbsTransitionEasing,leftNavButtons:t.navButtonsLeft,rightNavButtons:t.navButtonsRight,imageConfig:i,touchSupport:!0};return"buttons"!=e&&"custom"!=e||("ontouchstart"in window?(t.leftNavEnabled=!1,t.rightNavEnabled=!1):(t.centerSinglePage=!1,t.leftNavButtons=["prevPage"],t.rightNavButtons=["nextPage"])),t},_resizeThumbs:function(){this.thumbs&&this.thumbs.resize()},_toggleThumbs:function(){this._toggleOverlay(this.thumbs.slideshowOverlay)},_hideThumbsOnImageClick:function(){this.thumbs.slideshowOverlay&&(this.thumbs.slideshowOverlay._focus=!1,this.thumbs.slideshowOverlay.enable(),this.thumbs.slideshowOverlay.hide(),this.nav&&this.nav.slideshowOverlay&&this.nav.slideshowOverlay.enable())},_renderCaption:function(){this._hasNavButton("caption")&&(this.caption=new b.FL.SlideshowCaption({lessLinkText:this.get("captionLessLinkText"),moreLinkText:this.get("captionMoreLinkText"),textLength:this.get("captionTextLength"),stripTags:this.get("captionStripTags")}),this.add(this.caption),this.caption.plug(b.FL.SlideshowOverlay,{hideDelay:this.get("overlayHideDelay"),visible:!1,closeButton:!0}),this._syncCaption())},_syncCaption:function(){var t=this.caption.get("boundingBox"),e=this.get("navOverlay"),i=this.get("navPosition"),s=this._getNav(),n="padding"+i.charAt(0).toUpperCase()+i.slice(1),a=0;t.setStyle("position","absolute"),s&&(a=parseInt(s.get("boundingBox").getComputedStyle("height"),10)),s&&e?(t.setStyle(n,a+"px"),t.setStyle(i,"0px")):t.setStyle(i,a+"px")},_toggleCaption:function(){this._toggleOverlay(this.caption.slideshowOverlay)},_renderSocial:function(){this._hasNavButton("social")&&(this.social=new b.FL.SlideshowSocial,this.add(this.social),this.social.plug(b.FL.SlideshowOverlay,{hideDelay:this.get("overlayHideDelay"),visible:!1,closeButton:!0}),this._syncSocial())},_syncSocial:function(){var t=this.social.get("boundingBox"),e=this.get("navOverlay"),i=this.get("navPosition"),s=this._getNav(),n="padding"+i.charAt(0).toUpperCase()+i.slice(1),a=0;t.setStyle("position","absolute"),s&&(a=parseInt(s.get("boundingBox").getComputedStyle("height"),10)),s&&e?(t.setStyle(n,a+"px"),t.setStyle(i,"0px")):t.setStyle(i,a+"px")},_toggleSocial:function(){this._toggleOverlay(this.social.slideshowOverlay);var t=jQuery(".fl-slideshow-social-content").find("iframe");t.remove(),jQuery(".fl-slideshow-social-content").prepend(t)},_toggleOverlay:function(t){var e=this.get("navType"),i=this._getNav();t._visible?(i&&i.slideshowOverlay&&i.slideshowOverlay.enable(),t.enable(),t.hide()):(i&&i.slideshowOverlay&&i.slideshowOverlay.disable(),t.show(),t.disable()),this.thumbs&&"thumbs"!=e&&this.thumbs.slideshowOverlay!==t&&(this.thumbs.slideshowOverlay.enable(),this.thumbs.slideshowOverlay.hide()),this.caption&&this.caption.slideshowOverlay!==t&&(this.caption.slideshowOverlay.enable(),this.caption.slideshowOverlay.hide()),this.social&&this.social.slideshowOverlay!==t&&(this.social.slideshowOverlay.enable(),this.social.slideshowOverlay.hide())},_overlayCloseClick:function(){this.nav&&this.nav.slideshowOverlay&&this.nav.slideshowOverlay.enable(),this.thumbs&&this.thumbs.slideshowOverlay&&this.thumbs.slideshowOverlay.enable(),this.caption&&this.caption.slideshowOverlay.enable(),this.social&&this.social.slideshowOverlay.enable(),this.imageNavLeft&&(this.imageNavLeft.slideshowOverlay.enable(),this.imageNavRight.slideshowOverlay.enable())},_hideAllOverlays:function(){this.nav&&this.nav.slideshowOverlay&&this.nav.slideshowOverlay._visible&&(this.nav.slideshowOverlay.enable(),this.nav.slideshowOverlay.hideWithTimer()),this.thumbs&&this.thumbs.slideshowOverlay&&this.thumbs.slideshowOverlay._visible&&(this.thumbs.slideshowOverlay.enable(),this.thumbs.slideshowOverlay.hideWithTimer()),this.caption&&this.caption.slideshowOverlay._visible&&(this.caption.slideshowOverlay.enable(),this.caption.slideshowOverlay.hideWithTimer()),this.social&&this.social.slideshowOverlay._visible&&(this.social.slideshowOverlay.enable(),this.social.slideshowOverlay.hideWithTimer()),this.imageNavLeft&&(this.imageNavLeft.slideshowOverlay.enable(),this.imageNavLeft.slideshowOverlay.hideWithTimer(),this.imageNavRight.slideshowOverlay.enable(),this.imageNavRight.slideshowOverlay.hideWithTimer())},_checkOverlaysOnMouseenter:function(){var t=this.get("navType"),e=this.get("navOverlay"),i=this._getNav(),s=!1;this.thumbs&&"thumbs"!=t&&this.thumbs.slideshowOverlay._visible?(s=!0,this.thumbs.slideshowOverlay.disable()):this.caption&&this.caption.slideshowOverlay._visible?(s=!0,this.caption.slideshowOverlay.disable()):this.social&&this.social.slideshowOverlay._visible&&(s=!0,this.social.slideshowOverlay.disable()),i&&s&&e&&i.slideshowOverlay.disable()},_hasNavButton:function(t){var e=this.get("navType");return("buttons"==e||"thumbs"==e||"custom"==e)&&(-1<b.Array.indexOf(this.get("navButtons"),t)||(-1<b.Array.indexOf(this.get("navButtonsLeft"),t)||-1<b.Array.indexOf(this.get("navButtonsRight"),t)))},_removeNavButton:function(t){var e=this.get("navButtons"),i=this.get("navButtonsLeft"),s=this.get("navButtonsRight"),n=this.get("verticalThumbsTopNavButtons"),a=this.get("verticalThumbsBottomNavButtons");-1<b.Array.indexOf(e,t)&&e.splice(b.Array.indexOf(e,t),1),-1<b.Array.indexOf(i,t)&&i.splice(b.Array.indexOf(i,t),1),-1<b.Array.indexOf(s,t)&&s.splice(b.Array.indexOf(s,t),1),-1<b.Array.indexOf(n,t)&&n.splice(b.Array.indexOf(n,t),1),-1<b.Array.indexOf(a,t)&&a.splice(b.Array.indexOf(a,t),1),this._set("navButtons",e),this._set("navButtonsLeft",i),this._set("navButtonsRight",s),this._set("verticalThumbsTopNavButtons",n),this._set("verticalThumbsBottomNavButtons",a)}},{CSS_PREFIX:"fl-slideshow",ATTRS:{clickAction:{value:"none"},clickActionUrl:{value:""},crop:{value:!1},cropHorizontalsOnly:{value:!1},loadingImageAlwaysEnabled:{value:!0},position:{value:"center center"},protect:{value:!0},upsize:{value:!0},transition:{value:"fade"},transitionDuration:{value:1},transitionEasing:{value:"ease-out"},kenBurnsZoom:{value:1.2},navType:{value:"none"},navPosition:{value:"bottom"},navOverlay:{value:!1},navButtons:{value:[]},navButtonsLeft:{value:[]},navButtonsRight:{value:[]},overlayHideOnMousemove:{value:!0},overlayHideDelay:{value:3e3},imageNavEnabled:{value:!1},mouseNavEnabled:{value:!1},thumbsHideOnClick:{value:!0},thumbsHorizontalSpacing:{value:15},thumbsVerticalSpacing:{value:15},thumbsSpaceEvenly:{value:!0},thumbsCenterSinglePage:{value:!0},thumbsPauseOnClick:{value:!1},thumbsTransition:{value:"slideHorizontal"},thumbsTransitionDuration:{value:.8},thumbsTransitionEasing:{value:"ease-out"},thumbsImageCrop:{value:!0},thumbsImageWidth:{value:50},thumbsImageHeight:{value:50},captionLessLinkText:{value:"Read Less"},captionMoreLinkText:{value:"Read More"},captionTextLength:{value:200},captionStripTags:{value:!1},verticalThumbsEnabled:{value:!1},verticalThumbsPosition:{value:"left"},verticalThumbsOverlay:{value:!1},verticalThumbsColumns:{value:1},verticalThumbsTopNavEnabled:{value:!1},verticalThumbsTopNavButtons:{value:["prevPage","nextPage"]},verticalThumbsBottomNavEnabled:{value:!0},verticalThumbsBottomNavButtons:{value:["prevPage","nextPage"]},verticalThumbsHorizontalSpacing:{value:15},verticalThumbsVerticalSpacing:{value:15},verticalThumbsSpaceEvenly:{value:!1},verticalThumbsPauseOnClick:{value:!1},verticalThumbsImageCrop:{value:!0},verticalThumbsImageWidth:{value:75},verticalThumbsImageHeight:{value:75},verticalThumbsTransition:{value:"slideVertical"},verticalThumbsTransitionDuration:{value:.8},verticalThumbsTransitionEasing:{value:"ease-out"},likeButtonEnabled:{value:!0},pinterestButtonEnabled:{value:!0},tweetButtonEnabled:{value:!0},touchSupport:{value:!0}}})},"2.0.0",{requires:["anim","event-mouseenter","plugin","transition","fl-event-move","fl-slideshow-css","fl-slideshow-base","fl-utils","sm-fonticon"]}),YUI.add("fl-slideshow-album-loader",function(g){g.namespace("FL").SlideshowAlbumLoader=g.Base.create("fl-slideshow-album-loader",g.Base,[],{_source:null,load:function(t){this._source=t,this.fire("start"),this[g.FL.SlideshowAlbumLoader.TYPES[t.type]].call(this)},_loadComplete:function(t){t=this._randomize(t),this.fire("complete",t)},_randomize:function(t){var e;if(this.get("randomize"))for(t.albumInfo.images.sort(function(){return.5-Math.random()}),e=0;e<t.albumInfo.images.length;e++)t.albumInfo.images[e].index=e;return t},_loadSmugMug:function(){var t=new g.FL.SmugMugAPI;t.on("complete",this._loadSmugMugSuccess,this),t.addParam("method","smugmug.images.get"),t.addParam("AlbumID",this._source.id),t.addParam("AlbumKey",this._source.key),t.addParam("Extras","Caption,Format,FileName"),this._source.password&&t.addParam("Password",this._source.password),this._source.sp&&t.addParam("SitePassword",this._source.sp),t.request()},_loadSmugMugSuccess:function(t){var e,i,s,n,a=t.Album.Images,o={},l=void 0!==this._source.proxy?this._source.proxy:"",h=0,r=null;for(o.index=this._source.index,o.id=t.Album.id,o.key=t.Album.Key,o.link=t.Album.URL,o.title=this._source.title||"",o.images=[],e="https://"+o.link.replace("https://","").split("/").shift()+"/buy/"+t.Album.id+"_"+t.Album.Key+"/",h=0;h<a.length;h++)i=l+t.Album.URL+"/"+a[h].id+"_"+a[h].Key,s="mp4"==(n=a[h].Format.toLowerCase())?".jpg":"."+n,o.images[h]={},o.images[h].index=h,o.images[h].sourceType="smugmug",o.images[h].albumId=t.Album.id,o.images[h].albumKey=t.Album.Key,o.images[h].id=a[h].id,o.images[h].key=a[h].Key,o.images[h].filename=a[h].FileName,o.images[h].format=n,o.images[h].caption=a[h].Caption||"",o.images[h].link=t.Album.URL+"#"+a[h].id+"_"+a[h].Key,o.images[h].tinyURL=i+"-Ti"+s,o.images[h].thumbURL=i+"-Th"+s,o.images[h].smallURL=i+"-S"+s,o.images[h].mediumURL=i+"-M"+s,o.images[h].largeURL=i+"-L"+s,o.images[h].xlargeURL=i+"-XL"+s,o.images[h].x2largeURL=i+"-X2"+s,o.images[h].x3largeURL=i+"-X3"+s,o.images[h].buyURL=e+a[h].id+"_"+a[h].Key,o.images[h].iframe="",o.images[h].caption.indexOf("iframe")&&(r=g.Node.create("<div>"+o.images[h].caption+"</div>").one("iframe"))&&(o.images[h].iframe=r.getAttribute("src"),o.images[h].caption=o.images[h].caption.replace(/<iframe.*>.*<\/iframe>/gi,""));this._loadComplete({albumInfo:o})},_loadUrls:function(){var t={},e=0;for(t.index=this._source.index,t.title=this._source.title||"",t.images=[];e<this._source.urls.length;e++)t.images[e]={},t.images[e].index=e,t.images[e].sourceType="urls",t.images[e].filename=this._source.urls[e].largeURL.split("/").pop(),t.images[e].format="",t.images[e].caption=this._source.urls[e].caption||"",t.images[e].alt=this._source.urls[e].alt||"",t.images[e].link=this._source.urls[e].largeURL,t.images[e].thumbURL=this._source.urls[e].thumbURL||this._source.urls[e].largeURL,t.images[e].smallURL=this._source.urls[e].smallURL||this._source.urls[e].largeURL,t.images[e].mediumURL=this._source.urls[e].mediumURL||this._source.urls[e].largeURL,t.images[e].largeURL=this._source.urls[e].largeURL,t.images[e].xlargeURL=this._source.urls[e].xlargeURL||this._source.urls[e].largeURL,t.images[e].x2largeURL=this._source.urls[e].x2largeURL||this._source.urls[e].largeURL,t.images[e].x3largeURL=this._source.urls[e].x3largeURL||this._source.urls[e].largeURL,t.images[e].buyURL=this._source.urls[e].buyURL||"",t.images[e].iframe=this._source.urls[e].iframe||"";this._loadComplete({albumInfo:t})}},{ATTRS:{randomize:{value:!1}},TYPES:{smugmug:"_loadSmugMug",flickr:"_loadFlickr",picasa:"_loadPicasa",urls:"_loadUrls",html:"_loadHtml"}})},"2.0.0",{requires:["base","fl-smugmug-api"]}),YUI.add("fl-slideshow-base",function(l){l.namespace("FL").SlideshowBase=l.Base.create("fl-slideshow-base",l.Widget,[l.WidgetParent],{_albumLoader:null,albums:[],albumInfo:null,albumIndex:null,imageInfo:null,imageIndex:null,lastImageIndex:null,_resizeTimer:null,_playing:!1,_playingTimer:null,_playingTimerEvent:null,_loadingImage:null,_loadingImageWrap:null,_loadingImageVisible:!1,_loadingImageTimer:null,_loadingImageContainer:null,_initialHeight:null,_initialWidth:null,initializer:function(){this._albumLoader=new l.FL.SlideshowAlbumLoader({randomize:this.get("randomize")})},renderUI:function(){this._renderLoadingImage()},bindUI:function(){this._albumLoader.on("complete",this._loadAlbumComplete,this),l.one(window).on("fl-slideshow-base|resize",this._delayResize,this),l.one(window).on("fl-slideshow-base|orientationchange",this._delayResize,this),l.Node.one("body").on("keydown",l.bind(this._onKey,this))},syncUI:function(){this.get("boundingBox").addClass("fl-slideshow-"+this.get("color")),this.resize(),this.get("loadOnRender")&&this.loadAlbum(this.get("defaultAlbum"),this.get("defaultImage"))},addAlbum:function(t){var e=this.get("source"),i=e.length;e[i]=t,e[i].index=i,this.set("source",e)},loadAlbum:function(t,e){var i=this.get("source"),e=void 0===e?0:e;this.imageIndex=null,this.lastImageIndex=null,this.fire("albumLoadStart"),this.once("albumLoadComplete",l.bind(this.loadImage,this,e)),i[t]&&"album-data"==i[t].type?(this.albums[t]=i[t].data,this._loadAlbumComplete({albumInfo:this.albums[t]})):i[t]&&this.albums[t]?this._loadAlbumComplete({albumInfo:this.albums[t]}):this._albumLoader.load(i[t]||i[0])},_loadAlbumComplete:function(t){this.albums[t.albumInfo.index]=t.albumInfo,this.albumInfo=t.albumInfo,this.albumIndex=t.albumInfo.index,this.fire("albumLoadComplete"),this.get("autoPlay")&&(this._playingTimerStart(),this.fire("played"),this._playing=!0)},loadImage:function(t){this._playing&&this._playingTimerStart(),t=(t=t<0?this.albumInfo.images.length-1:t)>=this.albumInfo.images.length?0:t,this.lastImageIndex=this.imageIndex,this.imageIndex=t,this.imageInfo=this.albumInfo.images[t],this.fire("imageLoadComplete",{imageInfo:this.imageInfo})},prevImage:function(){this.get("pauseOnNextOrPrev")&&this.pause(),this.loadImage(this.imageIndex-1),this.fire("prevImage")},nextImage:function(){this.get("pauseOnNextOrPrev")&&this.pause(),this.loadImage(this.imageIndex+1),this.fire("nextImage")},_onKey:function(t){switch(t.keyCode){case 37:this.prevImage();break;case 39:this.nextImage()}},resize:function(){var t=this.get("stretchy"),e=this.get("stretchyType"),i=parseInt(l.one("body").get("winWidth"),10),s=this.get("responsiveThreshold");s<i&&t&&"window"==e?this._stretchyWindowResize():i<=s||t&&"ratio"==e?this._stretchyRatioResize():this._standardResize(),this.fire("resize")},_standardResize:function(){var t=this.get("stretchy"),e=this.get("stretchyType"),i=this.get("boundingBox"),s=i.get("parentNode"),n=parseInt(s.getComputedStyle("height"),10),s=parseInt(s.getComputedStyle("width"),10),a=this.get("height"),o=this.get("width");i.hasClass("fl-fullscreen-active")?this._stretchyWindowResize():t&&"contain"==e?(i.setStyle("height",n+"px"),i.setStyle("width",s+"px")):l.Lang.isNumber(a)?(i.setStyle("height",a+"px"),o?i.setStyle("width",o+"px"):i.setStyle("width",s+"px")):this._stretchyRatioResize()},_stretchyWindowResize:function(){var t=this.get("boundingBox"),e=this.get("stretchyVerticalSpace"),i=parseInt(t.getStyle("paddingTop"),10),s=parseInt(t.getStyle("paddingBottom"),10),n=parseInt(l.one("body").get("winHeight"),10),a="";t.hasClass("fl-fullscreen-active")&&(e=0,a=parseInt(l.one("body").get("winWidth"),10)+"px"),t.setStyle("height",n-i-s-e+"px"),t.setStyle("width",a)},_stretchyRatioResize:function(){var t=this.get("boundingBox"),e=t.get("parentNode"),i=this.get("stretchyRatio"),s=parseInt(t.getStyle("paddingTop"),10),n=parseInt(t.getStyle("paddingBottom"),10),e=parseInt(e.getComputedStyle("width"),10),a=parseInt(l.one("body").get("winHeight"),10),o=parseInt(l.one("body").get("winWidth"),10),e=e*i,i="";t.hasClass("fl-fullscreen-active")&&(e=a,i=o),t.setStyle("height",e=e-s-n+"px"),t.setStyle("width",i)},_delayResize:function(){this._resizeTimer&&this._resizeTimer.cancel(),this._resizeTimer=l.later(300,this,this.resize)},play:function(){this._playingTimer=l.later(this.get("speed"),this,this._playingTimerComplete),this.fire("played"),this._playing=!0},pause:function(){this._playingTimerCancel(),this.fire("paused"),this._playing=!1},_setPlayingTimerEvent:function(t,e){this._playingTimerEvent={obj:t,e:e}},_playingTimerStart:function(t){this._playingTimerCancel(),t||null===this._playingTimerEvent?this._playingTimer=l.later(this.get("speed"),this,this._playingTimerComplete):this._playingTimerEvent.obj.once("fl-slideshow-base|"+this._playingTimerEvent.e,l.bind(this._playingTimerStart,this))},_playingTimerComplete:function(){this.loadImage(this.imageIndex+1),this.fire("playingTimerComplete")},_playingTimerCancel:function(){this._playingTimer&&this._playingTimer.cancel(),this._playingTimerEvent&&this._playingTimerEvent.obj.detach("fl-slideshow-base|"+this._playingTimerEvent.e)},_renderLoadingImage:function(){var t=l.merge({lines:11,length:6,width:2,radius:7,color:"",speed:1,trail:60,shadow:!1},this.get("loadingImageSettings"));this.get("loadingImageEnabled")&&(""===t.color&&(t.color=this._colorToHex(l.one("body").getStyle("color"))),this._loadingImage=new l.FL.Spinner(t),this._loadingImageWrap=l.Node.create('<div class="fl-loading-image"></div>'),this._loadingImageWrap.setStyles({position:"absolute","z-index":"1000"}))},_showLoadingImage:function(){this._loadingImage&&!this._loadingImageVisible&&(this._loadingImageVisible=!0,this._loadingImage.spin(),this._loadingImageWrap.insert(this._loadingImage.el),(null!==this._loadingImageContainer?this._loadingImageContainer:this.get("contentBox")).insert(this._loadingImageWrap),this._positionLoadingImage())},_showLoadingImageWithDelay:function(){this._loadingImage&&(this._loadingImageTimer=l.later(1e3,this,this._showLoadingImage))},_hideLoadingImage:function(){this._loadingImageTimer&&(this._loadingImageTimer.cancel(),this._loadingImageTimer=null),this._loadingImage&&this._loadingImageVisible&&(this._loadingImageVisible=!1,this._loadingImage.stop(),this._loadingImageWrap.remove())},_positionLoadingImage:function(){var t,e,i,s,n;this._loadingImage&&this._loadingImageVisible&&(t=this._loadingImageWrap,e=parseInt(t.getComputedStyle("height"),10),i=parseInt(t.getComputedStyle("width"),10),n=t.get("parentNode"),s=parseInt(n.getComputedStyle("height"),10),n=parseInt(n.getComputedStyle("width"),10),t.setStyles({left:(n-i)/2+"px",top:(s-e)/2+"px"}),l.one(this._loadingImage.el).setStyles({left:"50%",top:"50%"}))},_colorToHex:function(t){var e,i;return"#"===t.substr(0,1)?t:null===(t=/(.*?)rgb\((\d+), (\d+), (\d+)\)/.exec(t))?"#000":(e=parseInt(t[2],10),i=parseInt(t[3],10),i=(i=parseInt(t[4],10)|i<<8|e<<16).toString(16),t[1]+"#"+(i="0"===i?"000":i))}},{CSS_PREFIX:"fl-slideshow-base",ATTRS:{color:{value:"dark",writeOnce:!0},source:{value:[],setter:function(t){t.constructor==Object&&(t=[t]);for(var e=0;e<t.length;e++)t[e].index=e;return t}},defaultAlbum:{value:0},defaultImage:{value:0},loadOnRender:{value:!0},autoPlay:{value:!0},pauseOnNextOrPrev:{value:!0},randomize:{value:!1},speed:{value:4e3},responsiveThreshold:{value:600},stretchy:{value:!1},stretchyType:{value:"ratio"},stretchyVerticalSpace:{value:0},stretchyRatio:{value:.7},loadingImageEnabled:{value:!0},loadingImageSettings:{value:{}}}})},"2.0.0",{requires:["node","base","widget","widget-parent","widget-child","fl-slideshow-album-loader","fl-spinner"]}),YUI.add("fl-smugmug-api",function(t){t.namespace("FL").SmugMugAPI=t.Base.create("fl-smugmug-api",t.Base,[],{_sessionID:null,_requestURL:null,initializer:function(){this._resetRequestURL()},addParam:function(t,e){this._requestURL=this._requestURL+"&"+t+"="+e},loginAnon:function(){this.addParam("method","smugmug.login.anonymously"),this.once("complete",this._loginAnonComplete),this.request()},_loginAnonComplete:function(t){t.Login&&(this._sessionID=t.Login.Session.id)},request:function(){this.addParam("Callback","{callback}"),t.jsonp(this._requestURL,{on:{success:this._requestComplete,timeout:function(){}},context:this,timeout:6e4,args:[]})},_requestComplete:function(t){this._resetRequestURL(),this.fire("complete",t)},_resetRequestURL:function(){this._requestURL=this.get("apiURL")+"?APIKey="+this.get("apiKey"),this._sessionID&&this.addParam("SessionID",this._sessionID)}},{ATTRS:{apiURL:{value:"https://api.smugmug.com/services/api/json/1.3.0/"},apiKey:{value:"7w6kuU5Ee6KSgRRExf2KLgppdkez9JD2"}}})},"2.0.0",{requires:["base","jsonp"]}),YUI.add("fl-spinner",function(U){var e,g=window,s=document,a=void 0,h="width",r="length",u="radius",d="lines",m="trail",c="color",_="opacity",v="speed",p="shadow",o="style",f="height",b="left",y="top",x="px",n="childNodes",I="firstChild",l="parentNode",S="position",z="relative",M="absolute",A="animation",w="transform",T="Timeout",B="#000",t=o+"Sheets",C="webkit0Moz0ms0O".split(0),D={};function L(t,e){for(var i=~~((t[r]-1)/2),s=1;s<=i;s++)e(t[2*s-1],t[2*s])}function N(t){var i=s.createElement(t||"div");return L(arguments,function(t,e){i[t]=e}),i}function P(t,e,i){return i&&!i[l]&&P(t,i),t.insertBefore(e,i||null),t}P(s.getElementsByTagName("head")[0],N(o));var O=s[t][s[t][r]-1];function R(t,e){var i,s,n=t[o];if(n[e]!==a)return e;for(e=e.charAt(0).toUpperCase()+e.slice(1),s=0;s<C[r];s++)if(n[i=C[s]+e]!==a)return i}function E(i){return L(arguments,function(t,e){i[o][R(i,t)||t]=e}),i}function H(t){this.opts=function(i){return L(arguments,function(t,e){i[t]===a&&(i[t]=e)}),i}(t||{},d,12,m,100,r,7,h,5,u,10,c,B,_,.25,v,1)}(t=H.prototype={spin:function(t){var s,n,a,o,l,h=this,r=h.el=h[d](h.opts);return t&&P(t,E(r,b,~~(t.offsetWidth/2)+x,y,~~(t.offsetHeight/2)+x),t[I]),e||(s=h.opts,n=0,a=20/s[v],o=(1-s[_])/(a*s[m]/100),l=a/s[d],function t(){n++;for(var e=s[d];e;e--){var i=Math.max(1-(n+e*l)%a*o,s[_]);h[_](r,s[d]-e,i,s)}h[T]=h.el&&g["set"+T](t,50)}()),h},stop:function(){var t=this.el;return g["clear"+T](this[T]),t&&t[l]&&t[l].removeChild(t),this.el=a,this}})[d]=function(i){var t,e=E(N(),S,z),s=function(t,e){var i,s=[_,e,~~(100*t)].join("-"),n="{"+_+":"+t+"}";if(!D[s]){for(i=0;i<C[r];i++)try{O.insertRule("@"+(C[i]&&"-"+C[i].toLowerCase()+"-"||"")+"keyframes "+s+"{0%{"+_+":1}"+e+"%"+n+"to"+n+"}",O.cssRules[r])}catch(t){}D[s]=1}return s}(i[_],i[m]),n=0;function a(t,e){return E(N(),S,M,h,i[r]+i[h]+x,f,i[h]+x,"background",t,"boxShadow",e,w+"Origin",b,w,"rotate("+~~(360/i[d]*n)+"deg) translate("+i[u]+x+",0)","borderRadius","100em")}for(;n<i[d];n++)t=E(N(),S,M,y,1+~(i[h]/2)+x,w,"translate3d(0,0,0)",A,s+" "+1/i[v]+"s linear infinite "+(1/i[d]/i[v]*n-1/i[v])+"s"),i[p]&&P(t,E(a(B,"0 0 4px "+B),y,2+x)),P(e,P(t,a(i[c],"0 0 1px rgba(0,0,0,.1)")));return e},t[_]=function(t,e,i){t[n][e][o][_]=i};var i,W="behavior",V="url(#default#VML)",k="group0roundrect0fill0stroke".split(0),F=E(N(k[0]),W,V);if(!R(F,w)&&F.adj){for(i=0;i<k[r];i++)O.addRule(k[i],W+":"+V);t[d]=function(){var s=this.opts,n=s[r]+s[h],t=2*n;function a(){return E(N(k[0],"coordsize",t+" "+t,"coordOrigin",-n+" "+-n),h,t,f,t)}var e,o=a(),i=~(s[r]+s[u]+s[h])+x;function l(t,e,i){P(o,P(E(a(),"rotation",360/s[d]*t+"deg",b,~~e),P(E(N(k[1],"arcsize",1),h,n,f,s[h],b,s[u],y,-s[h]/2,"filter",i),N(k[2],c,s[c],_,s[_]),N(k[3],_,0))))}if(s[p])for(e=1;e<=s[d];e++)l(e,-2,"progid:DXImage"+w+".Microsoft.Blur(pixel"+u+"=2,make"+p+"=1,"+p+_+"=.3)");for(e=1;e<=s[d];e++)l(e);return P(E(N(),"margin",i+" 0 0 "+i,S,z),o)},t[_]=function(t,e,i,s){s=s[p]&&s[d]||0,t[I][n][e+s][I][I][_]=i}}else e=R(F,A);U.namespace("FL").Spinner=H},"2.0.0"),YUI.add("fl-utils",function(n){n.namespace("FL").Utils={cssSupport:function(t){var e=(document.body||document.documentElement).style,i=["Moz","Webkit","Khtml","O","ms","Icab"],s=0;if("transform"==t&&n.UA.gecko&&n.UA.gecko<4)return!1;if("transform"==t&&0<n.UA.opera)return!1;if("transform"==t&&0<n.UA.ie&&n.UA.ie<10)return!1;if("transform"==t&&navigator.userAgent.match(/Trident/))return!1;if(void 0===e)return!1;if("string"==typeof e[t])return!0;for(t=t.charAt(0).toUpperCase()+t.substr(1);s<i.length;s++)if("string"==typeof e[i[s]+t])return!0}}},"2.0.0");